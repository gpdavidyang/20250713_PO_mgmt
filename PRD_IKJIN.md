# 구매 발주 관리 시스템 - 제품 요구사항 정의서 (PRD)

## 📋 문서 정보
- **프로젝트명**: 구매 발주 관리 시스템 (Purchase Order Management System)
- **버전**: v1.0
- **작성일**: 2025-08-04
- **대상 사용자**: 건설업계 발주 관리 담당자
- **목적**: 건설 프로젝트의 구매 발주서 관리 업무 디지털화 및 자동화

---

## 🎯 1. 제품 개요

### 1.1 비전 (Vision)
건설업계의 발주 관리 업무를 완전히 디지털화하여, 효율적이고 투명한 구매 발주 프로세스를 구현한다.

### 1.2 핵심 목표 (Core Objectives)
- **업무 효율성 향상**: 수작업을 80% 이상 줄이고 처리 시간 단축
- **투명성 강화**: 모든 승인 과정의 추적 가능성 확보
- **오류 최소화**: Excel 기반 자동화로 입력 오류 90% 감소
- **접근성 개선**: 웹 기반으로 언제 어디서나 업무 처리 가능

### 1.3 핵심 가치 제안 (Value Proposition)
- **시간 절약**: 발주서 작성 시간 70% 단축
- **비용 절감**: 종이 기반 업무 프로세스 제거
- **품질 향상**: 표준화된 템플릿과 검증 프로세스
- **확장성**: 다양한 건설 프로젝트에 유연하게 적용

---

## 👥 2. 사용자 페르소나 (User Personas)

### 2.1 현장 직원 (Field Worker)
- **역할**: 실제 자재 소요량 파악 및 발주 요청
- **니즈**: 간단한 발주서 작성, 빠른 승인 요청
- **권한**: 발주서 생성, 본인 발주서 조회
- **사용 빈도**: 주 3-5회

### 2.2 프로젝트 매니저 (Project Manager)
- **역할**: 프로젝트별 발주 관리 및 1차 승인
- **니즈**: 프로젝트 전체 발주 현황 파악, 예산 관리
- **권한**: 담당 프로젝트 발주서 승인/거부, 전체 조회
- **사용 빈도**: 매일

### 2.3 본사 관리자 (HQ Management)
- **역할**: 회사 전체 발주 정책 수립 및 고액 승인
- **니즈**: 전사 발주 현황, 예산 대비 실적 분석
- **권한**: 고액 발주서 승인, 정책 설정
- **사용 빈도**: 주 2-3회

### 2.4 임원 (Executive)
- **역할**: 최종 의사결정 및 전략적 검토
- **니즈**: 요약된 대시보드, 핵심 지표 모니터링
- **권한**: 모든 발주서 최종 승인, 전체 현황 조회
- **사용 빈도**: 주 1-2회

### 2.5 시스템 관리자 (Admin)
- **역할**: 시스템 운영 및 마스터 데이터 관리
- **니즈**: 사용자 관리, 시스템 설정, 데이터 백업
- **권한**: 모든 기능 접근, 시스템 설정 변경
- **사용 빈도**: 매일

---

## 🚀 3. 핵심 기능 요구사항 (Core Features)

### 3.1 발주서 관리 (Purchase Order Management)

#### 3.1.1 발주서 생성
- **FR-001**: 발주서 작성
  - 표준 발주서 : 정해진 템플릿 으로 입력
  - 엑셀 발주서 : 엑셀 파일을 파싱해서 입력
  - 발주서 작성 시, 필수 항목 확인      
  - 실시간 금액 계산 (공급가액, 세액, 총액)
  - 한국 원화 포맷팅 (₩12,345,000)
  - 필수 항목 검증
  - 엑셀 및 CSV 파일 import/export 기능 필요
  - **주의**: 압출 발주서, 판넬 발주서, 부자재 발주서 화면은 현재 불필요하여 UI에서 숨김 처리. 단, 소스코드는 유지하여 향후 필요시 활성화 가능하도록 보존

- **FR-002**: 품목 관리 및 선택 : 품목 관리 기능 화면은 불필요
  - 품목 마스터 DB 연동
  - 품목 계층 구조화
  - 대분류/중분류/소분류 계층 구조
  - 엑셀 발주서 입력 시, 항목과 일치

- **FR-003**: 거래처 정보 관리
  - 거래처 마스터 DB 연동
  - 사업자번호 검증
  - 담당자 정보 관리
  - 거래 이력 조회
  - 엑셀 발주서 입력 시, 거래처 정보 확인
  - 거래처 변경 시, 기존 발주서 재발주 불가
  - 엑셀 및 CSV 파일 import/export 기능 필요

#### 3.1.2 발주서 조회 및 검색
- **FR-004**: 다양한 검색 조건
  - 발주번호, 프로젝트명, 거래처명
  - 기간별 검색 (발주일, 납기일)
  - 금액 범위 검색
  - 상태별 필터링

- **FR-005**: 목록 표시 옵션
  - 테이블 뷰 / 카드 뷰 전환
  - 정렬 기능 (날짜, 금액, 상태)
  - 페이지네이션
  - 엑셀 내보내기

#### 3.1.3 발주서 수정 및 삭제
- **FR-006**: 상태별 수정 권한
  - 임시저장: 전체 수정 가능
  - 승인 대기: 제한적 수정
  - 승인됨: 수정 불가 (취소만 가능)

- **FR-007**: 변경 이력 관리
  - 모든 수정 내역 저장
  - 변경자, 변경일시, 변경 내용 기록
  - 이력 조회 기능

### 3.2 승인 워크플로우 (Approval Workflow)

#### 3.2.1 역할 기반 승인
- **FR-008**: 다단계 승인 프로세스
  - 금액별 승인 권한 설정
  - 역할별 승인 한도 관리
  - 자동 승인 경로 결정

- **FR-009**: 승인/거부 처리
  - 승인/거부 사유 입력
  - 이메일 알림 발송
  - 상태 자동 업데이트

#### 3.2.2 승인 현황 관리
- **FR-010**: 승인 대기 목록
  - 본인 승인 권한 내 발주서 표시
  - 우선순위 정렬 (긴급도, 금액)
  - 일괄 승인 기능

- **FR-011**: 승인 이력 조회
  - 승인 과정 타임라인 표시
  - 승인자별 처리 현황
  - 지연 승인 알림

- 현재는 사용자가 직접 승인/거부를 처리할 수 있으나, 향후 단계별 승인 절차 도입을 고려하여, 승인관리 기능에서 직접 승인/거부와 단계별 승인 모두를 지원하는 설정 옵션이 필요합니다.

### 3.3 Excel 자동화 시스템 (Excel Automation)

#### 3.3.1 Excel 파일 업로드 및 처리
- **FR-012**: 표준 Excel 템플릿 지원
  - Input 시트 기반 데이터 파싱
  - 12개 필수 컬럼 검증 (A~L열) : 2025-08-05 업데이트 - 세액/합계 필드 제거
  - 데이터 유효성 검사
  - Input 시트 제거
  - 10단계 fallback 시스템
  - 갑지/을지 시트 100% 서식 보존 --> '갑지/을지' 라고 특정하지 않고, Input 시트를 제외한 모든 시트 100% 서식 보존

- **FR-013**: 일괄 발주서 생성
  - Excel 데이터 → DB 자동 저장
  - 중복 발주서 검증
  - 오류 발생 시 롤백

#### 3.3.2 서식 보존 시스템
- **FR-014**: Input 시트 제거
  - ZIP 레벨 완벽 처리 (최우선)
  - 10단계 fallback 시스템
  - 갑지/을지 시트 100% 서식 보존 --> '갑지/을지' 라고 특정하지 않고, Input 시트를 제외한 모든 시트 100% 서식 보존
  - 엑셀 파일과 함께 엑셀파일을 PDF화 한 파일도 보존해야 함.  

- **FR-015**: 처리된 파일 관리
  - 임시 파일 자동 정리
  - 처리 상태 실시간 표시
  - 오류 발생 시 복구 방안

#### 3.3.3 자동 이메일 발송
- **FR-016**: 거래처별 이메일 발송
  - 처리된 Excel 파일 첨부
  - 처리된 Excel 파일을 PDF화 한 파일도 첨부 
  - 커스터마이징 가능한 메일 템플릿
  - 발송 결과 추적

- **FR-017**: 발송 이력 관리
  - 발송 일시, 수신자, 첨부파일 기록
  - 재발송 기능
  - 발송 실패 시 알림

### 3.4 마스터 데이터 관리 (Master Data Management)

#### 3.4.1 프로젝트 관리
- **FR-018**: 프로젝트 정보 관리
  - 프로젝트명, 고객사, 위치, 예산
  - 프로젝트 상태 관리 (계획/진행/보류/완료/취소)
  - 프로젝트별 템플릿 설정

#### 3.4.2 거래처 관리
- **FR-019**: 거래처 정보 관리
  - 회사명, 사업자번호, 연락처
  - 담당자 정보, 결제 조건
  - 거래 신용도 평가
  - 거래처명의 별칭(Alias)을 등록해 놓을 수 있는 필드가 필요함. 예를 들어, (주)익진, 주식회사 익진, 익진 이 3개 회사 이름을 사용자나 엑셀 파일에서 다양하게 사용하더라도, 시스템에서는 이 별칭 필드를 기준으로 거래처를 식별/매칭합니다.

#### 3.4.3 품목 관리
- **FR-020**: 품목 마스터 관리
  - 3단계 카테고리 분류 (대분류/중분류/소분류)
  - 품목명, 규격, 단위, 단가
  - 공급업체별 가격 정보
  - 현재 회사에서 1회성 맞춤용 원부자재를 주로 사용하고 있어서 재사용,재고 관리 개념이나 방향성을 현재는 가지고 있지 않음.
  - 품목별 재고 관리 개념이나 방향성을 현재는 가지고 있지 않음. 
  - 그래서 현 시점에서 화면 UI로 구체화하거나, Database에서의 Key 값으로 연동을 고려할 필요는 없다.
  - **중요**: 모든 발주서 조회, 검색, 보고서에 품목 계층 구조 적용 필수
  - Excel 다운로드 시 INPUT 시트 형식(대분류/중분류/소분류 포함)으로 제공

#### 3.4.4 회사 정보 관리
- **FR-021**: 발주사 회사 정보
  - 회사명, 사업자번호, 주소
  - 로고, 인감, 서명 이미지
  - 이메일 발송 설정

### 3.5 대시보드 및 리포팅 (Dashboard & Reporting)

#### 3.5.1 실시간 대시보드
- **FR-022**: 핵심 지표 표시
  - 월별 발주 현황 차트
  - 승인 대기 건수
  - 프로젝트별 예산 대비 실적

- **FR-023**: 사용자별 맞춤 대시보드
  - 역할별 필요 정보 표시
  - 개인화 가능한 위젯
  - 빠른 액션 버튼

#### 3.5.2 리포트 생성
- **FR-024**: 표준 리포트
  - 월간/분기별/특정기간별 발주 현황
  - 거래처별 거래 실적
  - 지연 승인 현황
  - 대분류, 중분류, 소분류별 발주 현황
  - 프로젝트별 발주 현황
  - 거래처별 발주 현황
  - **Excel 다운로드**: INPUT 시트 형식으로 품목 계층 정보 포함
  - **필터링**: 대분류 → 중분류 → 소분류 드릴다운 검색

---

## 🔧 4. 비기능적 요구사항 (Non-Functional Requirements)

### 4.1 성능 요구사항 (Performance)
- **NFR-001**: 응답 시간
  - 일반 페이지 로딩: 3초 이내
  - API 응답: 200ms 이내
  - Excel 파일 처리: 10MB 파일 30초 이내

- **NFR-002**: 처리량
  - 동시 사용자: 100명
  - 일일 발주서 처리: 1,000건
  - Excel 동시 처리: 5개 파일

### 4.2 보안 요구사항 (Security)
- **NFR-003**: 인증 및 권한
  - 세션 기반 인증 시스템
  - 역할 기반 접근 제어 (RBAC)
  - 비밀번호 암호화 저장

- **NFR-004**: 데이터 보안
  - 중요 정보 암호화 저장
  - API 요청 검증
  - 파일 업로드 보안 검사

### 4.3 가용성 (Availability)
- **NFR-005**: 시스템 가동률
  - 99.5% 이상 (월 3.6시간 이하 다운타임)
  - 점검 시간: 주말 새벽 시간대
  - 자동 백업 및 복구 시스템

### 4.4 확장성 (Scalability)
- **NFR-006**: 수직/수평 확장 지원
  - 사용자 수 증가 대응
  - 데이터 증가 대응
  - 모듈식 아키텍처

### 4.5 사용성 (Usability)
- **NFR-007**: 사용자 경험
  - 직관적인 UI/UX
  - 반응형 웹 디자인
  - 한국어 완전 지원
  - 접근성 표준 준수 (WCAG 2.1 AA)

### 4.6 호환성 (Compatibility)
- **NFR-008**: 브라우저 지원
  - Chrome, Firefox, Safari, Edge 최신 버전
  - 모바일 브라우저 지원
  - Internet Explorer 11 제한 지원

---

## 📋 5. 기능 명세서 (Feature Specifications)

### 5.1 사용자 인터페이스 표준

#### 5.1.1 컬러 시스템
- **Primary**: #3B82F6 (파란색) - 메인 액션
- **Success**: #10B981 (녹색) - 성공 상태
- **Warning**: #F59E0B (노란색) - 주의 상태  
- **Danger**: #EF4444 (빨간색) - 오류/삭제
- **Gray Scale**: #F9FAFB ~ #111827 (배경/텍스트)

#### 5.1.2 타이포그래피
- **Font Family**: 시스템 기본 폰트
- **Font Sizes**: 12px(Small) ~ 16px(Large)
- **Font Weights**: Normal, Medium, Semibold, Bold

#### 5.1.3 레이아웃 패턴
- **Container**: 최대 너비 1200px, 중앙 정렬
- **Grid**: 반응형 12컬럼 그리드 시스템
- **Spacing**: 4px 단위 체계 (4, 8, 12, 16, 24px)

### 5.2 데이터 처리 표준

#### 5.2.1 금액 표시
- **Format**: ₩12,345,000 (원화 기호 + 천 단위 콤마)
- **Input**: 실시간 포맷팅 적용
- **Storage**: 숫자형으로 저장 (DECIMAL 15,2)

#### 5.2.2 날짜 처리
- **Display**: YYYY-MM-DD (한국 표준)
- **Input**: 날짜 선택기 (Date Picker)
- **Storage**: UTC 기준 저장

#### 5.2.3 파일 처리
- **Upload**: 최대 10MB, Excel 파일만 허용
- **Security**: MIME 타입 검증, 바이러스 스캔
- **Storage**: 임시 저장 후 자동 정리

---

## 🚦 6. 제약사항 및 가정 (Constraints & Assumptions)

### 6.1 기술적 제약사항
- **브라우저**: Internet Explorer 11 이하 미지원
- **파일 크기**: Excel 파일 최대 10MB
- **동시 접속**: 최대 100명 (서버 리소스 기준)
- **데이터베이스**: PostgreSQL 사용 필수

### 6.2 비즈니스 제약사항
- **예산**: 개발비 및 운영비 제한
- **일정**: 6개월 내 MVP 출시
- **인력**: 개발팀 3-5명 규모
- **법규**: 건설업 관련 법규 준수

### 6.3 전제 조건
- **인프라**: 클라우드 환경 구축 완료
- **데이터**: 기존 Excel 기반 데이터 마이그레이션
- **교육**: 사용자 교육 프로그램 수립
- **지원**: IT 지원팀 운영 체계 구축

---

## 📊 7. 성공 지표 (Success Metrics)

### 7.1 정량적 지표
- **사용자 채택률**: 90% 이상 (기존 사용자 대비)
- **업무 처리 시간**: 70% 단축
- **오류 발생률**: 90% 감소
- **시스템 가동률**: 99.5% 이상

### 7.2 정성적 지표
- **사용자 만족도**: 4.5/5.0 이상
- **업무 효율성**: 크게 향상됨
- **학습 용이성**: 매우 쉬움
- **전반적 평가**: 매우 만족

### 7.3 비즈니스 지표
- **ROI**: 1년 내 투자 회수
- **비용 절감**: 연간 30% 이상
- **생산성 향상**: 50% 이상
- **고객 만족도**: 향상

---

## 🗺️ 8. 로드맵 (Roadmap)

### 8.1 Phase 1 - MVP (3개월)
- 기본 발주서 CRUD 기능
- 단순 승인 워크플로우
- 기본 마스터 데이터 관리
- 웹 기반 사용자 인터페이스

### 8.2 Phase 2 - 고도화 (3개월)
- Excel 자동화 시스템
- 이메일 발송 기능
- 대시보드 및 리포팅
- 고급 검색 및 필터링

### 8.3 Phase 3 - 확장 (3개월)
- 모바일 최적화
- API 확장
- 외부 시스템 연동
- 고급 분석 기능

### 8.4 Phase 4 - 최적화 (지속적)
- 성능 최적화
- UX/UI 개선
- 추가 기능 개발
- 유지보수 및 지원

---

## 📝 9. 부록 (Appendix)

### 9.1 용어 정의
- **발주서**: 구매 주문서 (Purchase Order)
- **갑지/을지**: 발주서 원본/사본
- **Input 시트**: Excel 템플릿의 데이터 입력 시트
- **승인 워크플로우**: 단계별 승인 과정

### 9.2 참조 문서
- `SYSTEM_DOCUMENTATION.md`: 시스템 아키텍처
- `UI_STANDARDS.md`: UI/UX 표준
- `PO_TEMPLATE_SYSTEM_GUIDE.md`: Excel 자동화 가이드
- `shared/schema.ts`: 데이터베이스 스키마

### 9.3 변경 이력
| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|-----------|--------|
| v1.0 | 2025-08-04 | 초기 PRD 작성 | Claude |
| v1.1 | 2025-08-05 | Excel 템플릿 컬럼 수정 (17개→12개, 세액/합계 필드 제거) | Claude |
| v1.2 | 2025-08-05 | 품목 계층 구조 전체 시스템 통합 요구사항 추가 | Claude |

---

**이 PRD는 살아있는 문서입니다. 프로젝트 진행에 따라 지속적으로 업데이트되어야 합니다.**