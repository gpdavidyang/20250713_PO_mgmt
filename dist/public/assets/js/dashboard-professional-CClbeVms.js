import{u as L,a as S,b as T,c as E,d as F,r as g,e as M,j as e,P as $,F as B,f as j,C as y,B as N,g as P,h as R}from"./index-BhrwCNPD.js";import{D as O}from"./dashboard-skeleton-eUwWTzmf.js";import{A as v,a as Y}from"./arrow-up-CAK81Cbi.js";import{D as K}from"./dollar-sign--E-vojnL.js";import{C as U}from"./clock-B89Qo3tb.js";import{R as w,C as z,X as _,Y as G,T as C,P as I,a as W,b as X}from"./PieChart-C9EGOsL0.js";import{A as Q,a as V}from"./AreaChart-DPB2TwAa.js";import{P as q}from"./package-BxttDPtg.js";import{C as i}from"./chevrons-up-down-BOYGP0Of.js";import{U as H}from"./users-_hudq-A2.js";import"./index-MzMa6IaS.js";function me(){const{user:m,isLoading:h}=L(),{toast:u}=S(),[,l]=T();E();const{actualTheme:f}=F(),s=f==="dark"&&document.documentElement.classList.contains("dark");g.useEffect(()=>{console.log("🎨 Theme Debug:",{actualTheme:f,isDarkMode:s,htmlClasses:document.documentElement.className,hasDarkClass:document.documentElement.classList.contains("dark")})},[f,s]),g.useEffect(()=>{if(!h&&!m){u({title:"Unauthorized",description:"You are logged out. Redirecting to login...",variant:"destructive"}),setTimeout(()=>{l("/login")},500);return}},[m,h,u]);const{data:n,isLoading:k,error:J}=M(),c=n?.statistics||{},D=n?.recentOrders||[],p=n?.monthlyStats||[],d=n?.statusStats||[];if(n?.projectStats,n?.categoryStats,k)return e.jsx(O,{});if(!m)return null;const r={primary:"#3B82F6",primaryLight:"#60A5FA",primaryDark:"#2563EB",secondary:"#93C5FD",accent:"#DBEAFE",gray:"#6B7280",success:"#10B981",warning:"#F59E0B",danger:"#EF4444"},x=p.sort((t,a)=>t.month.localeCompare(a.month)).map(t=>{const[a,b]=t.month.split("-"),A=new Date().getFullYear();return{month:parseInt(a)===A?`${b}월`:`${a.substring(2)}.${b}`,fullMonth:t.month,발주건수:Number(t.count)||0,금액백만원:Math.round(Number(t.amount||t.totalAmount)/1e6)||0}}),o=d.filter(t=>t&&Number(t.count)>0).map(t=>({name:t.status==="pending"?"승인대기":t.status==="approved"?"승인완료":t.status==="sent"?"발송완료":t.status==="completed"?"완료":t.status==="draft"?"임시저장":t.status==="cancelled"?"취소됨":t.status,value:Number(t.count),color:t.status==="pending"?r.warning:t.status==="approved"?r.success:t.status==="sent"?r.primary:t.status==="completed"?r.primaryDark:t.status==="draft"?r.gray:t.status==="cancelled"?r.danger:r.gray,status:t.status}));return console.log("📊 Dashboard Professional - Monthly Data:",{original_monthlyStats:p,transformed_monthlyChartData:x,dataLength:x.length}),console.log("📊 Dashboard Professional - Status Data:",{original_statusStats:d,filtered_statusChartData:o,hasOriginalData:d&&d.length>0,hasFilteredData:o&&o.length>0,chartDataLength:o?.length||0,firstChartItem:o?.[0]||null}),e.jsx("div",{className:"min-h-screen",style:{backgroundColor:s?"#111827":"#f9fafb"},children:e.jsxs("div",{className:"max-w-[1366px] mx-auto p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",style:{color:s?"#f9fafb":"#1f2937"},children:"대시보드"}),e.jsx("p",{className:"text-sm mt-1",style:{color:s?"#9ca3af":"#6b7280"},children:"실시간 발주 현황을 한눈에 확인하세요"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>l("/create-order"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-sm",children:[e.jsx($,{className:"h-5 w-5"}),"새 발주서"]}),e.jsxs("div",{className:"text-sm",style:{color:s?"#9ca3af":"#6b7280"},children:["마지막 업데이트: ",new Date().toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"rounded-xl shadow-sm p-6 hover:shadow-md transition-shadow",style:{backgroundColor:s?"#1f2937":"#ffffff"},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:s?"#9ca3af":"#4b5563"},children:"총 발주서"}),e.jsx("p",{className:"text-2xl font-bold mt-2",style:{color:s?"#f3f4f6":"#111827"},children:c.totalOrders||0}),e.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[e.jsx(v,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-green-600",children:"12% 증가"})]})]}),e.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:s?"rgba(30, 58, 138, 0.3)":"#dbeafe"},children:e.jsx(B,{className:"h-6 w-6",style:{color:s?"#60a5fa":"#2563eb"}})})]})}),e.jsx("div",{className:"rounded-xl shadow-sm p-6 hover:shadow-md transition-shadow",style:{backgroundColor:s?"#1f2937":"#ffffff"},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:s?"#9ca3af":"#4b5563"},children:"총 발주 금액"}),e.jsx("p",{className:"text-2xl font-bold mt-2",style:{color:s?"#60a5fa":"#2563eb"},children:j(c.totalAmount||0)}),e.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[e.jsx(v,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-green-600",children:"8.5% 증가"})]})]}),e.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:s?"rgba(5, 150, 105, 0.3)":"#d1fae5"},children:e.jsx(K,{className:"h-6 w-6",style:{color:s?"#34d399":"#059669"}})})]})}),e.jsx("div",{className:"rounded-xl shadow-sm p-6 hover:shadow-md transition-shadow cursor-pointer",style:{backgroundColor:s?"#1f2937":"#ffffff"},onClick:()=>l("/orders?status=pending"),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:s?"#9ca3af":"#4b5563"},children:"승인 대기"}),e.jsx("p",{className:"text-2xl font-bold mt-2",style:{color:s?"#fb923c":"#ea580c"},children:c.pendingOrders||0}),e.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[e.jsx(y,{className:"h-4 w-4 text-orange-500 mr-1"}),e.jsx("span",{className:"text-orange-600",children:"즉시 확인 필요"})]})]}),e.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:s?"rgba(194, 65, 12, 0.3)":"#fed7aa"},children:e.jsx(U,{className:"h-6 w-6",style:{color:s?"#fb923c":"#ea580c"}})})]})}),e.jsx("div",{className:"rounded-xl shadow-sm p-6 hover:shadow-md transition-shadow",style:{backgroundColor:s?"#1f2937":"#ffffff"},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:s?"#9ca3af":"#4b5563"},children:"활성 프로젝트"}),e.jsx("p",{className:"text-2xl font-bold mt-2",style:{color:s?"#f3f4f6":"#111827"},children:c.activeProjects||0}),e.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[e.jsx(Y,{className:"h-4 w-4 text-gray-400 mr-1"}),e.jsx("span",{style:{color:s?"#9ca3af":"#6b7280"},children:"변동 없음"})]})]}),e.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:s?"rgba(107, 33, 168, 0.3)":"#ede9fe"},children:e.jsx(N,{className:"h-6 w-6",style:{color:s?"#a855f7":"#7c3aed"}})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"rounded-xl shadow-sm p-6",style:{backgroundColor:s?"#1f2937":"#ffffff"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:s?"#f3f4f6":"#111827"},children:"월별 발주 추이"}),e.jsx("button",{className:"text-sm font-medium transition-colors",style:{color:s?"#60a5fa":"#2563eb"},onMouseEnter:t=>{t.currentTarget.style.color=s?"#3b82f6":"#1d4ed8"},onMouseLeave:t=>{t.currentTarget.style.color=s?"#60a5fa":"#2563eb"},children:"전체 보기"})]}),e.jsx("div",{className:"h-64",children:e.jsx(w,{width:"100%",height:"100%",children:e.jsxs(Q,{data:x,margin:{top:10,right:30,left:20,bottom:30},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorAmount",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:r.primary,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:r.primary,stopOpacity:0})]})}),e.jsx(z,{strokeDasharray:"3 3",stroke:s?"#374151":"#f0f0f0"}),e.jsx(_,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:s?"#9CA3AF":"#6B7280"},interval:0,angle:-45,textAnchor:"end",height:60}),e.jsx(G,{axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:s?"#9CA3AF":"#6B7280"},label:{value:"발주 건수",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fill:s?"#9CA3AF":"#6B7280",fontSize:"12px"}}}),e.jsx(C,{contentStyle:{backgroundColor:s?"#1f2937":"white",border:s?"1px solid #374151":"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",color:s?"#f9fafb":"#1f2937"},formatter:(t,a)=>[`${t}건`,"발주 건수"],labelFormatter:t=>`${t} 발주 현황`}),e.jsx(V,{type:"monotone",dataKey:"발주건수",stroke:r.primary,fillOpacity:1,fill:"url(#colorAmount)",strokeWidth:2})]})})})]}),e.jsxs("div",{className:"rounded-xl shadow-sm p-6",style:{backgroundColor:s?"#1f2937":"#ffffff"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:s?"#f3f4f6":"#111827"},children:"발주 상태 분포"}),e.jsx("button",{className:"text-sm font-medium transition-colors",style:{color:s?"#60a5fa":"#2563eb"},onMouseEnter:t=>{t.currentTarget.style.color=s?"#3b82f6":"#1d4ed8"},onMouseLeave:t=>{t.currentTarget.style.color=s?"#60a5fa":"#2563eb"},children:"상세 보기"})]}),d&&d.length>0&&o.length>0?e.jsxs("div",{className:"h-64 flex items-center",children:[e.jsx("div",{className:"w-1/2 h-full",children:e.jsx(w,{width:"100%",height:"100%",children:e.jsxs(I,{width:200,height:200,children:[e.jsx(W,{data:o,cx:"50%",cy:"50%",innerRadius:50,outerRadius:90,paddingAngle:2,dataKey:"value",children:o.map((t,a)=>e.jsx(X,{fill:t.color},`cell-${a}`))}),e.jsx(C,{formatter:(t,a)=>[`${t}건`,a],contentStyle:{backgroundColor:s?"#1f2937":"white",border:s?"1px solid #374151":"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",color:s?"#f9fafb":"#1f2937"}})]})})}),e.jsx("div",{className:"w-1/2 pl-6",children:o.map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:t.color}}),e.jsx("span",{className:"text-sm font-medium",style:{color:s?"#d1d5db":"#374151"},children:t.name})]}),e.jsxs("span",{className:"text-sm font-semibold",style:{color:s?"#f3f4f6":"#111827"},children:[t.value,"건"]})]},a))})]}):e.jsx("div",{className:"h-64 flex items-center justify-center",style:{color:s?"#9ca3af":"#6b7280"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(q,{className:"h-12 w-12 mx-auto mb-2",style:{color:s?"#4b5563":"#d1d5db"}}),e.jsx("p",{className:"text-sm",children:"상태별 데이터가 없습니다."}),e.jsx("p",{className:"text-xs mt-1",style:{color:s?"#6b7280":"#9ca3af"},children:"발주서를 생성하면 차트가 표시됩니다."})]})})]})]}),e.jsxs("div",{className:"rounded-xl shadow-sm",style:{backgroundColor:s?"#1f2937":"#ffffff"},children:[e.jsx("div",{className:"p-6 border-b",style:{borderColor:s?"#374151":"#e5e7eb"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:s?"#f3f4f6":"#111827"},children:"최근 발주 내역"}),e.jsxs("button",{onClick:()=>l("/orders"),className:"text-sm font-medium flex items-center gap-1 transition-colors",style:{color:s?"#60a5fa":"#2563eb"},onMouseEnter:t=>{t.currentTarget.style.color=s?"#3b82f6":"#1d4ed8"},onMouseLeave:t=>{t.currentTarget.style.color=s?"#60a5fa":"#2563eb"},children:["전체 보기",e.jsx(P,{className:"h-4 w-4"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{style:{backgroundColor:s?"#374151":"#f9fafb"},children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:s?"#9ca3af":"#6b7280"},children:e.jsxs("button",{className:`flex items-center gap-1 transition-colors ${s?"hover:text-gray-300":"hover:text-gray-700"}`,children:["발주번호",e.jsx(i,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:s?"#9ca3af":"#6b7280"},children:e.jsxs("button",{className:`flex items-center gap-1 transition-colors ${s?"hover:text-gray-300":"hover:text-gray-700"}`,children:["거래처",e.jsx(i,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:s?"#9ca3af":"#6b7280"},children:e.jsxs("button",{className:`flex items-center gap-1 transition-colors ${s?"hover:text-gray-300":"hover:text-gray-700"}`,children:["프로젝트",e.jsx(i,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:s?"#9ca3af":"#6b7280"},children:e.jsxs("button",{className:`flex items-center gap-1 transition-colors ${s?"hover:text-gray-300":"hover:text-gray-700"}`,children:["금액",e.jsx(i,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:s?"#9ca3af":"#6b7280"},children:e.jsxs("button",{className:`flex items-center gap-1 transition-colors ${s?"hover:text-gray-300":"hover:text-gray-700"}`,children:["상태",e.jsx(i,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium uppercase tracking-wider",style:{color:s?"#9ca3af":"#6b7280"},children:"액션"})]})}),e.jsx("tbody",{style:{backgroundColor:s?"#1f2937":"#ffffff"},children:D.slice(0,5).map(t=>e.jsxs("tr",{className:"transition-colors",style:{backgroundColor:"transparent",borderBottom:`1px solid ${s?"#374151":"#e5e7eb"}`},onMouseEnter:a=>{a.currentTarget.style.backgroundColor=s?"#374151":"#f9fafb"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",style:{color:s?"#f3f4f6":"#111827"},children:t.orderNumber}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:s?"#d1d5db":"#374151"},children:t.vendor?.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:s?"#d1d5db":"#374151"},children:t.project?.projectName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold",style:{color:s?"#60a5fa":"#2563eb"},children:j(t.totalAmount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:t.status==="pending"?s?"rgba(180, 83, 9, 0.3)":"#fef3c7":t.status==="approved"?s?"rgba(5, 150, 105, 0.3)":"#d1fae5":t.status==="sent"?s?"rgba(30, 58, 138, 0.3)":"#dbeafe":s?"#374151":"#f3f4f6",color:t.status==="pending"?s?"#fbbf24":"#d97706":t.status==="approved"?s?"#34d399":"#059669":t.status==="sent"?s?"#60a5fa":"#2563eb":s?"#d1d5db":"#374151"},children:t.status==="pending"?"승인대기":t.status==="approved"?"승인완료":t.status==="sent"?"발송완료":t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("button",{onClick:()=>l(`/orders/${t.id}`),className:"font-medium text-sm transition-colors",style:{color:s?"#60a5fa":"#2563eb"},onMouseEnter:a=>{a.currentTarget.style.color=s?"#3b82f6":"#1d4ed8"},onMouseLeave:a=>{a.currentTarget.style.color=s?"#60a5fa":"#2563eb"},children:"상세보기"})})]},t.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8",children:[e.jsxs("button",{onClick:()=>l("/orders?status=pending"),className:"rounded-lg p-4 hover:shadow-md transition-shadow flex items-center gap-3 border",style:{backgroundColor:s?"#1f2937":"#ffffff",borderColor:s?"#374151":"#e5e7eb"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:s?"rgba(194, 65, 12, 0.3)":"#fed7aa"},children:e.jsx(y,{className:"h-5 w-5",style:{color:s?"#fb923c":"#ea580c"}})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:s?"#f3f4f6":"#111827"},children:"승인 대기 확인"}),e.jsxs("p",{className:"text-xs",style:{color:s?"#9ca3af":"#6b7280"},children:[c.pendingOrders||0,"건 대기중"]})]})]}),e.jsxs("button",{onClick:()=>l("/vendors"),className:"rounded-lg p-4 hover:shadow-md transition-shadow flex items-center gap-3 border",style:{backgroundColor:s?"#1f2937":"#ffffff",borderColor:s?"#374151":"#e5e7eb"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:s?"rgba(30, 58, 138, 0.3)":"#dbeafe"},children:e.jsx(H,{className:"h-5 w-5",style:{color:s?"#60a5fa":"#2563eb"}})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:s?"#f3f4f6":"#111827"},children:"거래처 관리"}),e.jsxs("p",{className:"text-xs",style:{color:s?"#9ca3af":"#6b7280"},children:[c.activeVendors||0,"개 활성"]})]})]}),e.jsxs("button",{onClick:()=>l("/projects"),className:"rounded-lg p-4 hover:shadow-md transition-shadow flex items-center gap-3 border",style:{backgroundColor:s?"#1f2937":"#ffffff",borderColor:s?"#374151":"#e5e7eb"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:s?"rgba(107, 33, 168, 0.3)":"#ede9fe"},children:e.jsx(N,{className:"h-5 w-5",style:{color:s?"#a855f7":"#7c3aed"}})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:s?"#f3f4f6":"#111827"},children:"현장 관리"}),e.jsxs("p",{className:"text-xs",style:{color:s?"#9ca3af":"#6b7280"},children:[c.activeProjects||0,"개 진행중"]})]})]}),e.jsxs("button",{onClick:()=>l("/reports"),className:"rounded-lg p-4 hover:shadow-md transition-shadow flex items-center gap-3 border",style:{backgroundColor:s?"#1f2937":"#ffffff",borderColor:s?"#374151":"#e5e7eb"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:s?"rgba(5, 150, 105, 0.3)":"#d1fae5"},children:e.jsx(R,{className:"h-5 w-5",style:{color:s?"#34d399":"#059669"}})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:s?"#f3f4f6":"#111827"},children:"보고서 생성"}),e.jsx("p",{className:"text-xs",style:{color:s?"#9ca3af":"#6b7280"},children:"상세 분석"})]})]})]})]})})}export{me as default};
