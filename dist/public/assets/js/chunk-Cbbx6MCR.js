import{r as i,u as Y,a as U,j as e,S as ys,C as Pe,U as Ne,D as fs,R as bs,b as Ye,c as xe,B as Le,d as ze,e as ws,F as Re,f as X,X as Cs,L as es,G as ss,P as ue,g as Oe,T as ie,M as Ss,h as As,i as ks,k as Ts,l as Ls,m as Us,n as Qe,o as Fs,p as Is,I as Es,q as qs,Z as Ds,s as _s}from"./chunk-Dd62wDmJ.js";import{u as Ue,a as w,q as E,C as q,b as H,c as me,d as he,e as Ks,L as ye,T as as,f as ts,g as Z,h as J,A as $e,i as Be,S as ge,B as ce,I as d,j as Ms,k as n,l as ls,F as je,m as o,n as x,o as m,p as h,r as j,s as Vs,t as Ps,v as He,w as de,x as zs,y as oe,z as Ge,D as We,R as re,E as Xe,G as Rs,H as Os,J as Qs,K as $s,M as Bs,N as Hs,O as Gs,P as Ws,Q as Xs,U as Zs,V as fe,W as be,X as we,Y as Ce,Z as Se,_ as Ae,$ as ke,a0 as Te,a1 as ns,a2 as B,a3 as Js,a4 as Ze,a5 as Ys}from"./index-Bmw6lq1s.js";import{u as is}from"./chunk-CztufZQ6.js";import{t as pe,z as t}from"./chunk-Szeu1KvF.js";const Je=[{value:"field_worker",label:"현장 실무자",color:"bg-gray-100"},{value:"project_manager",label:"현장 관리자",color:"bg-blue-100"},{value:"hq_management",label:"본사 관리부",color:"bg-orange-100"},{value:"executive",label:"임원",color:"bg-purple-100"},{value:"admin",label:"시스템 관리자",color:"bg-red-100"}];function ea(){const{toast:y}=Ue(),[A,D]=i.useState("staged"),[r,S]=i.useState([]),[_,F]=i.useState({field_worker:0,project_manager:5e6,hq_management:3e7,executive:1e8,admin:999999999}),[ee,G]=i.useState(!0),[f,k]=i.useState(!1),{data:p,isLoading:u}=Y({queryKey:["/api/admin/approval-workflow-settings"]}),g=U({mutationFn:async l=>await w("PUT","/api/admin/approval-workflow-settings",l),onSuccess:()=>{y({title:"성공",description:"승인 워크플로우 설정이 저장되었습니다."}),E.invalidateQueries({queryKey:["/api/admin/approval-workflow-settings"]})},onError:()=>{y({title:"오류",description:"설정 저장에 실패했습니다.",variant:"destructive"})}});i.useEffect(()=>{p&&(D(p.approvalMode),S(p.directApprovalRoles||[]),F(p.stagedApprovalThresholds||_),G(p.requireAllStages??!0),k(p.skipLowerStages??!1))},[p]);const I=l=>{S(C=>C.includes(l)?C.filter(M=>M!==l):[...C,l])},se=(l,C)=>{const M=parseInt(C.replace(/[^0-9]/g,""))||0;F(ae=>({...ae,[l]:M}))},K=()=>{g.mutate({approvalMode:A,directApprovalRoles:r,stagedApprovalThresholds:_,requireAllStages:ee,skipLowerStages:f})},N=()=>{p&&(D(p.approvalMode),S(p.directApprovalRoles||[]),F(p.stagedApprovalThresholds||_),G(p.requireAllStages??!0),k(p.skipLowerStages??!1))};return u?e.jsx(q,{children:e.jsx(H,{className:"p-6",children:e.jsx("div",{className:"text-center text-gray-500",children:"설정을 불러오는 중..."})})}):e.jsxs(q,{children:[e.jsxs(me,{children:[e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"h-5 w-5"}),"승인 워크플로우 설정"]}),e.jsx(Ks,{children:"발주서 승인 프로세스를 설정합니다. 직접 승인 또는 단계별 승인 방식을 선택할 수 있습니다."})]}),e.jsxs(H,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(ye,{children:"승인 방식"}),e.jsxs(as,{value:A,onValueChange:l=>D(l),children:[e.jsxs(ts,{className:"grid w-full grid-cols-2",children:[e.jsx(Z,{value:"direct",children:"직접 승인"}),e.jsx(Z,{value:"staged",children:"단계별 승인"})]}),e.jsxs(J,{value:"direct",className:"space-y-4",children:[e.jsxs($e,{children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx(Be,{children:"직접 승인 방식에서는 선택된 역할이 금액 제한 없이 바로 승인할 수 있습니다."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ye,{children:"직접 승인 가능 역할"}),e.jsx("div",{className:"space-y-2",children:Je.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ge,{checked:r.includes(l.value),onCheckedChange:()=>I(l.value)}),e.jsx("span",{className:"font-medium",children:l.label})]}),e.jsx(ce,{className:l.color,variant:"secondary",children:r.includes(l.value)?"승인 가능":"승인 불가"})]},l.value))})]})]}),e.jsxs(J,{value:"staged",className:"space-y-4",children:[e.jsxs($e,{children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx(Be,{children:"단계별 승인 방식에서는 각 역할별 승인 금액 한도가 적용됩니다."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ye,{children:"역할별 승인 금액 한도"}),e.jsx("div",{className:"space-y-2",children:Je.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ne,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium min-w-[120px]",children:l.label})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fs,{className:"h-4 w-4 text-gray-500"}),e.jsx(d,{type:"text",value:Ms(_[l.value]||0),onChange:C=>se(l.value,C.target.value),className:"w-40 text-right",disabled:l.value==="field_worker"})]})]},l.value))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ye,{children:"추가 옵션"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"모든 단계 승인 필요"}),e.jsx("div",{className:"text-sm text-gray-500",children:"모든 필요한 승인 단계를 거쳐야 최종 승인됩니다."})]}),e.jsx(ge,{checked:ee,onCheckedChange:G})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"상위 역할 하위 단계 건너뛰기"}),e.jsx("div",{className:"text-sm text-gray-500",children:"상위 역할이 하위 단계의 승인을 건너뛸 수 있습니다."})]}),e.jsx(ge,{checked:f,onCheckedChange:k})]})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsxs(n,{variant:"outline",onClick:N,children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),"초기화"]}),e.jsxs(n,{onClick:K,disabled:g.isPending,children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),g.isPending?"저장 중...":"설정 저장"]})]})]})]})}const sa=t.object({companyName:t.string().min(1,"회사명을 입력해주세요"),businessNumber:t.string().min(1,"사업자등록번호를 입력해주세요"),address:t.string().min(1,"주소를 입력해주세요"),phone:t.string().min(1,"전화번호를 입력해주세요"),fax:t.string().optional(),email:t.string().email("올바른 이메일 형식을 입력해주세요").optional().or(t.literal("")),website:t.string().optional(),representative:t.string().min(1,"대표자명을 입력해주세요")}),aa=t.object({name:t.string().min(1,"이름을 입력해주세요"),email:t.string().email("올바른 이메일 형식을 입력해주세요"),phoneNumber:t.string().min(1,"전화번호를 입력해주세요"),role:t.enum(["field_worker","project_manager","hq_management","executive","admin"])}),ta=t.object({termKey:t.string().min(1,"용어 키를 입력해주세요"),termValue:t.string().min(1,"용어 값을 입력해주세요"),category:t.string().min(1,"카테고리를 입력해주세요"),description:t.string().optional(),isActive:t.boolean().default(!0)}),la=t.object({role:t.enum(["field_worker","project_manager","hq_management","executive"]),maxAmount:t.number().min(0,"금액은 0 이상이어야 합니다"),description:t.string().optional()});function na(){const{user:y,isAuthenticated:A,isLoading:D}=ls(),{toast:r}=Ue(),[,S]=is(),[_,F]=i.useState(!1);i.useState(null);const[ee,G]=i.useState("company"),[f,k]=i.useState(""),[p,u]=i.useState(!1),[g,I]=i.useState(null),[se,K]=i.useState(!1),[N,l]=i.useState(null),[C,M]=i.useState(""),[ae,O]=i.useState(!1),[V,W]=i.useState(null);i.useState(null);const[te,le]=i.useState("list"),[Q,ve]=i.useState(null),[ne,a]=i.useState("asc"),{data:c=[],isLoading:P}=Y({queryKey:["/api/users"],enabled:!!y&&y.role==="admin"}),{data:rs=[],isLoading:da}=Y({queryKey:["/api/companies"],enabled:!!y&&y.role==="admin"}),{data:Fe=[],isLoading:cs}=Y({queryKey:["/api/terminology"],enabled:!!y&&y.role==="admin"}),{data:Ie=[],isLoading:ds}=Y({queryKey:["/api/approval-authorities"],enabled:!!y&&y.role==="admin"}),v=rs[0],z=xe({resolver:pe(sa),defaultValues:{companyName:"",businessNumber:"",address:"",phone:"",fax:"",email:"",website:"",representative:""}}),T=xe({resolver:pe(aa),defaultValues:{name:"",email:"",phoneNumber:"",role:"field_worker"}}),L=xe({resolver:pe(ta),defaultValues:{termKey:"",termValue:"",category:"",description:"",isActive:!0}}),R=xe({resolver:pe(la),defaultValues:{role:"field_worker",maxAmount:0,description:""}});if(i.useEffect(()=>{v&&z.reset({companyName:v.companyName||"",businessNumber:v.businessNumber||"",address:v.address||"",phone:v.phone||"",fax:v.fax||"",email:v.email||"",website:v.website||"",representative:v.representative||""})},[v,z]),i.useEffect(()=>{g&&T.reset({name:g.name||"",email:g.email||"",phoneNumber:g.phoneNumber||"",role:g.role||"field_worker"})},[g,T]),i.useEffect(()=>{N&&L.reset({termKey:N.termKey||"",termValue:N.termValue||"",category:N.category||"",description:N.description||"",isActive:N.isActive??!0})},[N,L]),D)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:"로딩 중..."});if(!A||!y||y.role!=="admin")return S("/login"),null;const Ee=c.filter(s=>(s.name?.toLowerCase()||"").includes(f.toLowerCase())||(s.email?.toLowerCase()||"").includes(f.toLowerCase())||(s.phoneNumber?.toLowerCase()||"").includes(f.toLowerCase())).sort((s,b)=>{if(!Q)return 0;const $=s[Q]??"",Ve=b[Q]??"";return ne==="asc"?String($).localeCompare(String(Ve)):String(Ve).localeCompare(String($))}),os=Fe.filter(s=>s.termKey.toLowerCase().includes(C.toLowerCase())||s.termValue.toLowerCase().includes(C.toLowerCase())||s.category.toLowerCase().includes(C.toLowerCase())),qe=U({mutationFn:s=>v?w("PUT",`/api/companies/${v.id}`,s):w("POST","/api/companies",s),onSuccess:()=>{r({title:"성공",description:"회사 정보가 저장되었습니다."}),E.invalidateQueries({queryKey:["/api/companies"]}),F(!1)},onError:()=>{r({title:"오류",description:"회사 정보 저장에 실패했습니다.",variant:"destructive"})}}),De=U({mutationFn:s=>g?w("PUT",`/api/users/${g.id}`,s):w("POST","/api/users",s),onSuccess:()=>{r({title:"성공",description:g?"사용자가 수정되었습니다.":"사용자가 추가되었습니다."}),E.invalidateQueries({queryKey:["/api/users"]}),u(!1),I(null),T.reset()},onError:()=>{r({title:"오류",description:"사용자 저장에 실패했습니다.",variant:"destructive"})}}),_e=U({mutationFn:s=>N?w("PUT",`/api/terminology/${N.id}`,s):w("POST","/api/terminology",s),onSuccess:()=>{r({title:"성공",description:N?"용어가 수정되었습니다.":"용어가 추가되었습니다."}),E.invalidateQueries({queryKey:["/api/terminology"]}),K(!1),l(null),L.reset()},onError:()=>{r({title:"오류",description:"용어 저장에 실패했습니다.",variant:"destructive"})}}),xs=U({mutationFn:s=>w("DELETE",`/api/terminology/${s}`),onSuccess:()=>{r({title:"성공",description:"용어가 삭제되었습니다."}),E.invalidateQueries({queryKey:["/api/terminology"]})},onError:()=>{r({title:"오류",description:"용어 삭제에 실패했습니다.",variant:"destructive"})}}),Ke=U({mutationFn:({userId:s,isActive:b})=>w("PATCH",`/api/users/${s}/toggle-active`,{isActive:b}),onSuccess:()=>{r({title:"성공",description:"사용자 상태가 변경되었습니다."}),E.invalidateQueries({queryKey:["/api/users"]})},onError:()=>{r({title:"오류",description:"사용자 상태 변경에 실패했습니다.",variant:"destructive"})}}),Me=U({mutationFn:s=>s.id?w("PUT",`/api/approval-authorities/${s.id}`,s):w("POST","/api/approval-authorities",s),onSuccess:()=>{r({title:"성공",description:V?"승인 권한이 수정되었습니다.":"승인 권한이 추가되었습니다."}),E.invalidateQueries({queryKey:["/api/approval-authorities"]}),O(!1),W(null),R.reset()},onError:()=>{r({title:"오류",description:"승인 권한 저장에 실패했습니다.",variant:"destructive"})}}),ms=U({mutationFn:s=>w("DELETE",`/api/approval-authorities/${s}`),onSuccess:()=>{r({title:"성공",description:"승인 권한이 삭제되었습니다."}),E.invalidateQueries({queryKey:["/api/approval-authorities"]})},onError:()=>{r({title:"오류",description:"승인 권한 삭제에 실패했습니다.",variant:"destructive"})}}),hs=s=>{qe.mutate(s)},js=s=>{De.mutate(s)},ps=s=>{_e.mutate(s)},us=s=>{const b=V?{...s,id:V.id}:s;Me.mutate(b)},gs=s=>{W(s),R.reset({role:s.role,maxAmount:parseFloat(s.maxAmount),description:s.description||""}),O(!0)},Ns=s=>{Q===s?a(ne==="asc"?"desc":"asc"):(ve(s),a("asc"))},vs=(s,b,$)=>b!==s?null:$==="asc"?e.jsx(Ts,{className:"h-3 w-3"}):e.jsx(Ls,{className:"h-3 w-3"});return e.jsxs("div",{className:"p-6 max-w-[1366px] mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Le,{className:"h-6 w-6"}),"시스템 관리"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"사용자 및 시스템 설정을 관리하세요"})]}),e.jsxs(as,{value:ee,onValueChange:G,className:"w-full",children:[e.jsxs(ts,{className:"grid w-full grid-cols-5",children:[e.jsxs(Z,{value:"company",className:"flex items-center gap-2 text-sm",children:[e.jsx(Le,{className:"h-4 w-4"}),"회사 정보"]}),e.jsxs(Z,{value:"users",className:"flex items-center gap-2 text-sm",children:[e.jsx(Ne,{className:"h-4 w-4"}),"사용자 관리"]}),e.jsxs(Z,{value:"approval",className:"flex items-center gap-2 text-sm",children:[e.jsx(ze,{className:"h-4 w-4"}),"승인 권한"]}),e.jsxs(Z,{value:"workflow",className:"flex items-center gap-2 text-sm",children:[e.jsx(ws,{className:"h-4 w-4"}),"워크플로우"]}),e.jsxs(Z,{value:"terminology",className:"flex items-center gap-2 text-sm",children:[e.jsx(Re,{className:"h-4 w-4"}),"용어집 관리"]})]}),e.jsx(J,{value:"company",className:"mt-2",children:e.jsxs(q,{children:[e.jsx(me,{className:"pb-1",children:e.jsxs(he,{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsx("span",{children:"회사 정보"})]}),!_&&e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>F(!0),className:"gap-1 h-6 px-2 text-xs",children:[e.jsx(X,{className:"h-3 w-3"}),"수정"]})]})}),e.jsx(H,{className:"pt-1",children:_?e.jsx(je,{...z,children:e.jsxs("form",{onSubmit:z.handleSubmit(hs),className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(o,{control:z.control,name:"companyName",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{className:"text-xs",children:"회사명"}),e.jsx(h,{children:e.jsx(d,{...s,className:"h-7 text-xs"})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(o,{control:z.control,name:"businessNumber",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{className:"text-xs",children:"사업자등록번호"}),e.jsx(h,{children:e.jsx(d,{...s,className:"h-7 text-xs"})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(o,{control:z.control,name:"representative",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{className:"text-xs",children:"대표자"}),e.jsx(h,{children:e.jsx(d,{...s,className:"h-7 text-xs"})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(o,{control:z.control,name:"phone",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{className:"text-xs",children:"전화번호"}),e.jsx(h,{children:e.jsx(d,{...s,className:"h-7 text-xs"})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(o,{control:z.control,name:"address",render:({field:s})=>e.jsxs(x,{className:"col-span-2",children:[e.jsx(m,{className:"text-xs",children:"주소"}),e.jsx(h,{children:e.jsx(d,{...s,className:"h-7 text-xs"})}),e.jsx(j,{className:"text-xs"})]})})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(n,{type:"submit",size:"sm",disabled:qe.isPending,className:"gap-1 h-6 px-2 text-xs",children:[e.jsx(Ye,{className:"h-3 w-3"}),"저장"]}),e.jsxs(n,{type:"button",variant:"outline",size:"sm",onClick:()=>F(!1),className:"gap-1 h-6 px-2 text-xs",children:[e.jsx(Cs,{className:"h-3 w-3"}),"취소"]})]})]})}):e.jsx("div",{className:"space-y-3",children:v?e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-500 min-w-[60px]",children:"회사명:"}),e.jsx("span",{className:"text-gray-900",children:v.companyName})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-500 min-w-[80px]",children:"사업자번호:"}),e.jsx("span",{className:"text-gray-900",children:v.businessNumber})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-500 min-w-[60px]",children:"대표자:"}),e.jsx("span",{className:"text-gray-900",children:v.representative})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-500 min-w-[60px]",children:"전화번호:"}),e.jsx("span",{className:"text-gray-900",children:v.phone})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded col-span-2",children:[e.jsx("span",{className:"font-medium text-gray-500 min-w-[40px]",children:"주소:"}),e.jsx("span",{className:"text-gray-900",children:v.address})]})]}):e.jsx("div",{className:"text-xs text-center py-4 text-gray-500",children:"회사 정보가 없습니다. 추가해주세요."})})})]})}),e.jsx(J,{value:"users",className:"mt-2",children:e.jsxs(q,{children:[e.jsx(me,{className:"pb-1",children:e.jsxs(he,{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{children:"사용자 관리"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center bg-gray-100 rounded p-1",children:[e.jsx(n,{variant:te==="list"?"default":"ghost",size:"sm",onClick:()=>le("list"),className:"h-8 w-8 p-0",title:"리스트 보기",children:e.jsx(es,{className:"h-4 w-4"})}),e.jsx(n,{variant:te==="card"?"default":"ghost",size:"sm",onClick:()=>le("card"),className:"h-8 w-8 p-0",title:"카드 보기",children:e.jsx(ss,{className:"h-4 w-4"})})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>u(!0),className:"gap-1 h-6 px-2 text-xs",children:[e.jsx(ue,{className:"h-3 w-3"}),"사용자 추가"]})]})]})}),e.jsx(H,{className:"pt-1",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Oe,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),e.jsx(d,{placeholder:"사용자 검색...",value:f,onChange:s=>k(s.target.value),className:"h-7 text-xs pl-7"})]})}),P?e.jsx("div",{className:"text-xs text-center py-4",children:"사용자 정보를 불러오는 중..."}):te==="list"?e.jsxs(Vs,{children:[e.jsx(Ps,{children:e.jsxs(He,{children:[e.jsx(de,{className:"px-3 py-3 text-xs cursor-pointer hover:bg-gray-50",onClick:()=>Ns("name"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["이름",vs("name",Q,ne)]})}),e.jsx(de,{className:"px-3 py-3 text-xs",children:"역할"}),e.jsx(de,{className:"px-3 py-3 text-xs",children:"연락처"}),e.jsx(de,{className:"px-3 py-3 text-xs",children:"상태"}),e.jsx(de,{className:"px-3 py-3 text-xs text-center",children:"작업"})]})}),e.jsx(zs,{children:Ee.map(s=>e.jsxs(He,{className:"hover:bg-gray-50",children:[e.jsx(oe,{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-6 w-6",children:e.jsx(We,{className:"text-xs",children:s.name?.[0]||"U"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-xs text-gray-900",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.email})]})]})}),e.jsx(oe,{className:"px-3 py-3",children:e.jsx(re,{role:s.role})}),e.jsx(oe,{className:"px-3 py-3 text-xs",children:s.phoneNumber}),e.jsx(oe,{className:"px-3 py-3",children:e.jsx(ge,{checked:s.isActive??!0,onCheckedChange:b=>Ke.mutate({userId:s.id,isActive:b}),className:"h-4 w-7"})}),e.jsx(oe,{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>I(s),className:"h-6 w-6 p-0",title:"수정",children:e.jsx(X,{className:"h-3 w-3"})}),e.jsx(Xe,{user:s,onDeleteSuccess:()=>{E.invalidateQueries({queryKey:["/api/users"]}),r({title:"성공",description:"사용자가 삭제되었습니다."})},trigger:e.jsx(n,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",title:"삭제",children:e.jsx(ie,{className:"h-3 w-3"})})})]})})]},s.id))})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:Ee.map(s=>e.jsxs(q,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ge,{className:"h-8 w-8",children:e.jsx(We,{className:"text-sm",children:s.name?.[0]||"U"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm text-gray-900",children:s.name}),e.jsx(re,{role:s.role})]})]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:s.phoneNumber})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:new Date(s.createdAt).toLocaleDateString("ko-KR")})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[e.jsx(ge,{checked:s.isActive??!0,onCheckedChange:b=>Ke.mutate({userId:s.id,isActive:b}),className:"h-4 w-7"}),e.jsxs("div",{className:"flex items-center -space-x-1",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>I(s),className:"h-8 w-8 p-0 hover:bg-blue-50",title:"수정",children:e.jsx(X,{className:"h-4 w-4 text-blue-600"})}),e.jsx(Xe,{user:s,onDeleteSuccess:()=>{E.invalidateQueries({queryKey:["/api/users"]}),r({title:"성공",description:"사용자가 삭제되었습니다."})},trigger:e.jsx(n,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-red-50",title:"삭제",children:e.jsx(ie,{className:"h-4 w-4 text-red-600"})})})]})]})]},s.id))}),e.jsxs("div",{className:"text-xs text-gray-500 pt-1",children:["총 ",c.length,"명의 사용자가 등록되어 있습니다."]})]})})]})}),e.jsx(J,{value:"terminology",className:"mt-2",children:e.jsxs(q,{children:[e.jsx(me,{className:"pb-1",children:e.jsxs(he,{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{children:"용어집 관리"})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>K(!0),className:"gap-1 h-6 px-2 text-xs",children:[e.jsx(ue,{className:"h-3 w-3"}),"용어 추가"]})]})}),e.jsx(H,{className:"pt-1",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Oe,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),e.jsx(d,{placeholder:"용어 검색...",value:C,onChange:s=>M(s.target.value),className:"h-7 text-xs pl-7"})]})}),cs?e.jsx("div",{className:"text-xs text-center py-4",children:"용어 정보를 불러오는 중..."}):e.jsxs("div",{className:"border rounded-md overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 px-2 py-1 bg-gray-50 text-xs font-medium text-gray-600 border-b",children:[e.jsx("div",{className:"col-span-2",children:"용어 키"}),e.jsx("div",{className:"col-span-3",children:"용어 값"}),e.jsx("div",{className:"col-span-2",children:"카테고리"}),e.jsx("div",{className:"col-span-3",children:"설명"}),e.jsx("div",{className:"col-span-1",children:"상태"}),e.jsx("div",{className:"col-span-1 text-center",children:"작업"})]}),os.map(s=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 px-2 py-2 text-xs hover:bg-gray-50 border-b last:border-b-0",children:[e.jsx("div",{className:"col-span-2 font-medium text-gray-900 truncate",children:s.termKey}),e.jsx("div",{className:"col-span-3 text-gray-600 truncate",children:s.termValue}),e.jsx("div",{className:"col-span-2 text-gray-600 truncate",children:s.category}),e.jsx("div",{className:"col-span-3 text-gray-600 truncate",children:s.description||"-"}),e.jsx("div",{className:"col-span-1",children:e.jsx(ce,{variant:s.isActive?"outline":"secondary",children:s.isActive?"활성":"비활성"})}),e.jsxs("div",{className:"col-span-1 flex items-center justify-center gap-1",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>l(s),className:"h-5 w-5 p-0",title:"수정",children:e.jsx(X,{className:"h-3 w-3"})}),e.jsxs(Rs,{children:[e.jsx(Os,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 text-red-600 hover:text-red-700",title:"삭제",children:e.jsx(ie,{className:"h-3 w-3"})})}),e.jsxs(Qs,{children:[e.jsxs($s,{children:[e.jsx(Bs,{children:"용어 삭제"}),e.jsxs(Hs,{children:[s.termKey," 용어를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."]})]}),e.jsxs(Gs,{children:[e.jsx(Ws,{children:"취소"}),e.jsx(Xs,{onClick:()=>xs.mutate(s.id),className:"bg-red-600 hover:bg-red-700",children:"삭제"})]})]})]})]})]},s.id))]}),e.jsxs("div",{className:"text-xs text-gray-500 pt-1",children:["총 ",Fe.length,"개의 용어가 등록되어 있습니다."]})]})})]})}),e.jsx(J,{value:"approval",className:"mt-2",children:e.jsxs(q,{children:[e.jsx(me,{className:"pb-1",children:e.jsxs(he,{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{children:"승인 권한 설정"})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>O(!0),className:"gap-1 h-6 px-2 text-xs",children:[e.jsx(ue,{className:"h-3 w-3"}),"권한 추가"]})]})}),e.jsx(H,{className:"pt-1",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"각 역할별 승인 권한 한도를 설정하여 발주서 승인 프로세스를 관리합니다."}),ds?e.jsx("div",{className:"text-center py-4 text-xs text-gray-500",children:"로딩 중..."}):Ie.length===0?e.jsx("div",{className:"text-center py-4 text-xs text-gray-500",children:"설정된 승인 권한이 없습니다."}):e.jsx("div",{className:"space-y-1",children:Ie.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-xs",children:e.jsx(re,{role:s.role})}),e.jsx("span",{className:"text-blue-600 font-semibold text-xs",children:Zs(parseInt(s.maxAmount))})]}),s.description&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>gs(s),className:"h-6 w-6 p-0 hover:bg-blue-50",children:e.jsx(X,{className:"h-3 w-3"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>ms.mutate(s.id),className:"h-6 w-6 p-0 hover:bg-red-50",children:e.jsx(ie,{className:"h-3 w-3 text-red-500"})})]})]},s.id))})]})})]})}),e.jsx(J,{value:"workflow",className:"mt-2",children:e.jsx(ea,{})})]}),(p||g)&&e.jsx(fe,{open:!0,onOpenChange:()=>{u(!1),I(null),T.reset()},children:e.jsxs(be,{children:[e.jsx(we,{children:e.jsx(Ce,{children:g?"사용자 수정":"사용자 추가"})}),e.jsx(je,{...T,children:e.jsxs("form",{onSubmit:T.handleSubmit(js),className:"space-y-4",children:[e.jsx(o,{control:T.control,name:"name",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"이름"}),e.jsx(h,{children:e.jsx(d,{...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:T.control,name:"email",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"이메일"}),e.jsx(h,{children:e.jsx(d,{...s,type:"email"})}),e.jsx(j,{})]})}),e.jsx(o,{control:T.control,name:"phoneNumber",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"전화번호"}),e.jsx(h,{children:e.jsx(d,{...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:T.control,name:"role",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"역할"}),e.jsxs(Se,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(h,{children:e.jsx(Ae,{children:e.jsx(ke,{placeholder:"역할을 선택하세요"})})}),e.jsx(Te,{children:e.jsx(ns,{children:b=>b.map($=>e.jsx(B,{value:$.value,children:$.label},$.value))})})]}),e.jsx(j,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>{u(!1),I(null),T.reset()},children:"취소"}),e.jsx(n,{type:"submit",disabled:De.isPending,children:g?"수정":"추가"})]})]})})]})}),(se||N)&&e.jsx(fe,{open:!0,onOpenChange:()=>{K(!1),l(null),L.reset()},children:e.jsxs(be,{children:[e.jsx(we,{children:e.jsx(Ce,{children:N?"용어 수정":"용어 추가"})}),e.jsx(je,{...L,children:e.jsxs("form",{onSubmit:L.handleSubmit(ps),className:"space-y-4",children:[e.jsx(o,{control:L.control,name:"termKey",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"용어 키"}),e.jsx(h,{children:e.jsx(d,{...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:L.control,name:"termValue",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"용어 값"}),e.jsx(h,{children:e.jsx(d,{...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:L.control,name:"category",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"카테고리"}),e.jsx(h,{children:e.jsx(d,{...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:L.control,name:"description",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"설명"}),e.jsx(h,{children:e.jsx(d,{...s})}),e.jsx(j,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>{K(!1),l(null),L.reset()},children:"취소"}),e.jsx(n,{type:"submit",disabled:_e.isPending,children:N?"수정":"추가"})]})]})})]})}),(ae||V)&&e.jsx(fe,{open:!0,onOpenChange:()=>{O(!1),W(null),R.reset()},children:e.jsxs(be,{children:[e.jsx(we,{children:e.jsx(Ce,{children:V?"승인 권한 수정":"승인 권한 추가"})}),e.jsx(je,{...R,children:e.jsxs("form",{onSubmit:R.handleSubmit(us),className:"space-y-4",children:[e.jsx(o,{control:R.control,name:"role",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"역할"}),e.jsxs(Se,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(h,{children:e.jsx(Ae,{children:e.jsx(ke,{placeholder:"역할을 선택하세요"})})}),e.jsxs(Te,{children:[e.jsx(B,{value:"field_worker",children:"현장 실무자"}),e.jsx(B,{value:"project_manager",children:"현장 관리자"}),e.jsx(B,{value:"hq_management",children:"본사 관리부"}),e.jsx(B,{value:"executive",children:"임원/대표"})]})]}),e.jsx(j,{})]})}),e.jsx(o,{control:R.control,name:"maxAmount",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"최대 승인 한도 (원)"}),e.jsx(h,{children:e.jsx(d,{...s,type:"number",placeholder:"0",onChange:b=>s.onChange(parseInt(b.target.value)||0)})}),e.jsx(j,{})]})}),e.jsx(o,{control:R.control,name:"description",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"설명 (선택사항)"}),e.jsx(h,{children:e.jsx(d,{...s,placeholder:"권한에 대한 설명을 입력하세요"})}),e.jsx(j,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>{O(!1),W(null),R.reset()},children:"취소"}),e.jsx(n,{type:"submit",disabled:Me.isPending,children:V?"수정":"추가"})]})]})})]})})]})}const ja=Object.freeze(Object.defineProperty({__proto__:null,default:na},Symbol.toStringTag,{value:"Module"})),ia=t.object({email:t.string().email("올바른 이메일 주소를 입력하세요"),name:t.string().optional(),positionId:t.string().optional(),phoneNumber:t.string().optional(),role:t.enum(["user","manager","admin"]).default("user")});function ra(){const{user:y}=ls(),{toast:A}=Ue(),D=Us(),[,r]=is(),[S,_]=i.useState(""),[F,ee]=i.useState("list"),[G,f]=i.useState(!1),[k,p]=i.useState(null),u=xe({resolver:pe(ia),defaultValues:{email:"",name:"",positionId:"",phoneNumber:"",role:"user"}}),{data:g=[],isLoading:I}=Y({queryKey:["/api/users"]}),{data:se=[]}=Y({queryKey:["/api/positions"]}),K=U({mutationFn:async a=>{const c={...a,positionId:a.positionId&&a.positionId!==""&&a.positionId!=="none"?parseInt(a.positionId):null};return await w("POST","/api/users",c)},onSuccess:()=>{D.invalidateQueries({queryKey:["/api/users"]}),f(!1),u.reset(),A({title:"성공",description:"사용자가 추가되었습니다."})},onError:a=>{A({title:"오류",description:a.message||"사용자 추가에 실패했습니다.",variant:"destructive"})}}),N=U({mutationFn:async({id:a,...c})=>{const P={...c,positionId:c.positionId&&c.positionId!==""&&c.positionId!=="none"?parseInt(c.positionId):null};return await w("PATCH",`/api/users/${a}`,P)},onSuccess:()=>{D.invalidateQueries({queryKey:["/api/users"]}),f(!1),p(null),u.reset(),A({title:"성공",description:"사용자 정보가 수정되었습니다."})},onError:a=>{A({title:"오류",description:a.message||"사용자 수정에 실패했습니다.",variant:"destructive"})}}),l=U({mutationFn:async a=>await w("DELETE",`/api/users/${a}`),onSuccess:()=>{D.invalidateQueries({queryKey:["/api/users"]}),A({title:"성공",description:"사용자가 삭제되었습니다."})},onError:a=>{A({title:"오류",description:a.message||"사용자 삭제에 실패했습니다.",variant:"destructive"})}}),C=a=>{k?N.mutate({id:k.id,...a}):K.mutate(a)},M=g.filter(a=>a.email?.toLowerCase().includes(S.toLowerCase())||a.name?.toLowerCase().includes(S.toLowerCase())||a.position?.toLowerCase().includes(S.toLowerCase())),ae=a=>{p(a);const c=a.role;u.reset({email:a.email||"",name:a.name||"",positionId:a.positionId?String(a.positionId):"none",phoneNumber:a.phoneNumber||"",role:c||"user"}),f(!0)},O=a=>{confirm(`${a.email} 사용자를 삭제하시겠습니까?`)&&l.mutate(a.id)},V=a=>a.name?a.name:a.email?.split("@")[0]||"사용자명 없음",W=a=>a&&se.find(P=>P.id===a)?.positionName||"-",te=a=>{switch(a){case"admin":return"destructive";case"manager":return"default";case"user":return"secondary";default:return"outline"}},le=y?.role;if(I)return e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"사용자 정보를 확인하고 있습니다..."})]})});if(!y)return e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Qe,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"로그인이 필요합니다"}),e.jsx("p",{className:"text-muted-foreground",children:"사용자 관리 기능을 사용하려면 먼저 로그인하세요."}),e.jsx(n,{onClick:()=>r("/login"),className:"mt-4",children:"로그인하기"})]})});const Q=le==="admin",ve=!1,ne=Q||ve;return console.log("User management access check:",{userRole:le,isAdmin:Q,isDevelopment:ve,allowAccess:ne,currentUser:y}),ne?e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ne,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"사용자 관리"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"시스템 사용자를 관리하고 권한을 설정합니다"})]})]}),e.jsxs(n,{onClick:()=>{p(null),u.reset(),f(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"사용자 추가"]})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsx(d,{placeholder:"이메일, 이름, 직책으로 검색...",value:S,onChange:a=>_(a.target.value),className:"h-7 text-xs max-w-xs"}),e.jsxs(Js,{type:"single",value:F,onValueChange:a=>a&&ee(a),children:[e.jsx(Ze,{value:"list","aria-label":"목록 보기",className:"h-7 px-2",children:e.jsx(es,{className:"h-3 w-3"})}),e.jsx(Ze,{value:"grid","aria-label":"카드 보기",className:"h-7 px-2",children:e.jsx(Fs,{className:"h-3 w-3"})})]})]}),e.jsx(q,{children:e.jsx(H,{className:"p-0",children:I?e.jsx("div",{className:"space-y-1 p-2",children:[...Array(6)].map((a,c)=>e.jsxs("div",{className:"flex items-center justify-between py-1 px-2 animate-pulse",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4 mb-1"}),e.jsx("div",{className:"h-2 bg-gray-200 rounded w-1/3"})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]},c))}):M.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(Ne,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:S?"검색 조건에 맞는 사용자가 없습니다.":"등록된 사용자가 없습니다."}),!S&&e.jsxs(n,{size:"sm",onClick:()=>f(!0),className:"h-6 px-2 text-xs",children:[e.jsx(ue,{className:"h-3 w-3 mr-1"}),"첫 번째 사용자 추가"]})]}):e.jsx(e.Fragment,{children:F==="list"?e.jsxs("div",{className:"divide-y",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 px-2 py-1 bg-gray-50 text-xs font-medium text-gray-600",children:[e.jsx("div",{className:"col-span-2",children:"사용자명"}),e.jsx("div",{className:"col-span-3",children:"이메일"}),e.jsx("div",{className:"col-span-2",children:"전화번호"}),e.jsx("div",{className:"col-span-2",children:"직함"}),e.jsx("div",{className:"col-span-2",children:"권한"}),e.jsx("div",{className:"col-span-1 text-center",children:"작업"})]}),M.map(a=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 px-2 py-1 hover:bg-gray-50 transition-colors text-xs",children:[e.jsx("div",{className:"col-span-2 flex items-center",children:e.jsx("span",{className:"font-medium text-gray-900 truncate",children:V(a)})}),e.jsx("div",{className:"col-span-3 flex items-center",children:e.jsx("span",{className:"text-gray-600 truncate",children:a.email})}),e.jsx("div",{className:"col-span-2 flex items-center",children:e.jsx("span",{className:"text-gray-600 truncate",children:a.phoneNumber||"-"})}),e.jsx("div",{className:"col-span-2 flex items-center",children:e.jsx("span",{className:"text-gray-600 truncate",children:W(a.positionId)})}),e.jsx("div",{className:"col-span-2 flex items-center",children:e.jsx(ce,{variant:te(a.role||"user"),className:"text-xs px-1 py-0",children:e.jsx(re,{role:a.role||"user"})})}),e.jsxs("div",{className:"col-span-1 flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>ae(a),className:"inline-flex items-center justify-center w-5 h-5 rounded hover:bg-gray-100 text-gray-600",title:"수정",children:e.jsx(X,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>O(a),className:"inline-flex items-center justify-center w-5 h-5 rounded hover:bg-red-100 text-red-600",title:"삭제",children:e.jsx(ie,{className:"h-3 w-3"})})]})]},a.id))]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-2 p-2",children:M.map(a=>e.jsxs(q,{className:"p-3 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-900 truncate",children:V(a)}),e.jsx("p",{className:"text-xs text-gray-600 truncate",children:a.email})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{onClick:()=>ae(a),className:"inline-flex items-center justify-center w-6 h-6 rounded hover:bg-gray-100 text-gray-600",title:"수정",children:e.jsx(X,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>O(a),className:"inline-flex items-center justify-center w-6 h-6 rounded hover:bg-red-100 text-red-600",title:"삭제",children:e.jsx(ie,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"전화번호:"}),e.jsx("span",{className:"text-gray-700",children:a.phoneNumber||"-"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"직함:"}),e.jsx("span",{className:"text-gray-700",children:W(a.positionId)})]}),e.jsxs("div",{className:"flex justify-between text-xs items-center",children:[e.jsx("span",{className:"text-gray-500",children:"권한:"}),e.jsx(ce,{variant:te(a.role||"user"),className:"text-xs px-1 py-0",children:e.jsx(re,{role:a.role||"user"})})]})]})]},a.id))})})})}),e.jsx(fe,{open:G,onOpenChange:f,children:e.jsxs(be,{className:"max-w-md",children:[e.jsx(we,{children:e.jsx(Ce,{children:k?"사용자 수정":"새 사용자 추가"})}),e.jsx(je,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(C),className:"space-y-4",children:[e.jsx(o,{control:u.control,name:"email",render:({field:a})=>e.jsxs(x,{children:[e.jsx(m,{children:"이메일 *"}),e.jsx(h,{children:e.jsx(d,{placeholder:"user@company.com",...a,disabled:!!k})}),e.jsx(j,{})]})}),e.jsx(o,{control:u.control,name:"name",render:({field:a})=>e.jsxs(x,{children:[e.jsx(m,{children:"사용자명"}),e.jsx(h,{children:e.jsx(d,{placeholder:"홍길동",...a})}),e.jsx(j,{})]})}),e.jsx(o,{control:u.control,name:"positionId",render:({field:a})=>e.jsxs(x,{children:[e.jsx(m,{children:"직책"}),e.jsxs(Se,{onValueChange:a.onChange,value:a.value,children:[e.jsx(h,{children:e.jsx(Ae,{children:e.jsx(ke,{placeholder:"직책을 선택하세요"})})}),e.jsxs(Te,{children:[e.jsx(B,{value:"none",children:"직책 없음"}),se.map(c=>e.jsx(B,{value:String(c.id),children:c.positionName},c.id))]})]}),e.jsx(j,{})]})}),e.jsx(o,{control:u.control,name:"phoneNumber",render:({field:a})=>e.jsxs(x,{children:[e.jsx(m,{children:"연락처"}),e.jsx(h,{children:e.jsx(d,{placeholder:"010-1234-5678",...a})}),e.jsx(j,{})]})}),e.jsx(o,{control:u.control,name:"role",render:({field:a})=>e.jsxs(x,{children:[e.jsx(m,{children:"역할 *"}),e.jsxs(Se,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(h,{children:e.jsx(Ae,{children:e.jsx(ke,{placeholder:"역할을 선택하세요"})})}),e.jsx(Te,{children:e.jsx(ns,{children:c=>c.map(P=>e.jsx(B,{value:P.value,children:P.label},P.value))})})]}),e.jsx(j,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>f(!1),children:"취소"}),e.jsx(n,{type:"submit",disabled:K.isPending||N.isPending,children:k?"수정":"추가"})]})]})})]})})]}):e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Qe,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"접근 권한이 없습니다"}),e.jsx("p",{className:"text-muted-foreground",children:"사용자 관리 기능은 관리자만 사용할 수 있습니다."}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["현재 권한: ",e.jsx(re,{role:le||"user"})]})]})})}const pa=Object.freeze(Object.defineProperty({__proto__:null,default:ra},Symbol.toStringTag,{value:"Module"}));function ca(){return e.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"분류 관리 시스템"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"품목 분류를 효율적으로 관리하세요"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ce,{variant:"secondary",className:"bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 border-blue-200",children:[e.jsx(Is,{className:"w-3 h-3 mr-1"}),"혁신적 UI"]}),e.jsx(ce,{variant:"outline",className:"text-green-600 border-green-200",children:"v2.0 Beta"})]})]}),e.jsx("div",{className:"flex-1",children:e.jsx(Ys,{})}),e.jsx(q,{className:"border-blue-200 bg-blue-50",children:e.jsx(H,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Es,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900 mb-2",children:"💡 사용 팁:"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"🚀 주요 기능:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-blue-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qs,{className:"w-3 h-3"}),e.jsxs("span",{children:[e.jsx("strong",{children:"드래그 앤 드롭:"})," 직관적인 재배열"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-3 h-3"}),e.jsxs("span",{children:[e.jsx("strong",{children:"실시간 편집:"})," 즉시 반영되는 변경사항"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-3 h-3"}),e.jsxs("span",{children:[e.jsx("strong",{children:"다중 선택:"})," 일괄 작업 지원"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"w-3 h-3"}),e.jsxs("span",{children:[e.jsx("strong",{children:"스마트 검색:"})," 고급 필터링"]})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"⌨️ 단축키 및 조작법:"}),e.jsxs("ul",{className:"text-blue-800 space-y-1 text-xs",children:[e.jsxs("li",{children:["• ",e.jsx("kbd",{className:"bg-white px-1 rounded",children:"Ctrl+F"}),"로 빠른 검색, ",e.jsx("kbd",{className:"bg-white px-1 rounded",children:"Ctrl+A"}),"로 전체 선택"]}),e.jsx("li",{children:"• 분류를 드래그하여 계층구조 변경, 우클릭으로 컨텍스트 메뉴 사용"}),e.jsxs("li",{children:["• ",e.jsx("kbd",{className:"bg-white px-1 rounded",children:"Delete"}),"키로 선택된 항목 삭제, ",e.jsx("kbd",{className:"bg-white px-1 rounded",children:"Esc"}),"로 선택 해제"]}),e.jsx("li",{children:"• 줌 조절로 더 나은 가시성 확보, 다중 선택 모드로 일괄 작업 수행"})]})]})]})]})})})]})}const ua=Object.freeze(Object.defineProperty({__proto__:null,default:ca},Symbol.toStringTag,{value:"Module"}));export{ja as a,ua as c,pa as u};
