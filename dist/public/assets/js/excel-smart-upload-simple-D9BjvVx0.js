import{r as c,d as h,j as e,N as j,V as v,W as f,Z as N,O as y,_ as C,B as b,b as g,i as w,J as S}from"./index-CYSdMOsg.js";import{A as o,a as x}from"./alert-C7z6Ndvx.js";function U(){const[l,m]=c.useState(null),[r,d]=c.useState(!1),[a,n]=c.useState(null),{toast:t}=h(),p=i=>{const s=i.target.files?.[0];s&&(s.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||s.type==="application/vnd.ms-excel"?(m(s),n(null)):t({title:"파일 형식 오류",description:"Excel 파일(.xlsx, .xls)만 업로드 가능합니다.",variant:"destructive"}))},u=async()=>{if(!l){t({title:"파일 선택",description:"업로드할 파일을 선택해주세요.",variant:"destructive"});return}d(!0);const i=new FormData;i.append("file",l);try{const s=await S("POST","/api/excel-smart-upload/process",i);n(s),t({title:"업로드 성공",description:`${s.itemCount||0}개의 항목이 처리되었습니다.`,variant:"success"})}catch(s){console.error("Upload error:",s),t({title:"업로드 실패",description:s.message||"파일 업로드 중 오류가 발생했습니다.",variant:"destructive"})}finally{d(!1)}};return e.jsx("div",{className:"container mx-auto py-6 max-w-4xl",children:e.jsxs(j,{children:[e.jsx(v,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-6 w-6"}),"스마트 엑셀 업로드 (간소화 버전)"]})}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(C,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx("span",{className:"text-blue-600 hover:text-blue-700 font-medium",children:"파일을 선택하세요"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:".xlsx,.xls",onChange:p,disabled:r})]})}),l&&e.jsxs("div",{className:"text-sm text-gray-600",children:["선택된 파일: ",l.name," (",(l.size/1024).toFixed(2)," KB)"]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(b,{onClick:u,disabled:!l||r,className:"min-w-[200px]",children:r?"처리 중...":"업로드 및 처리"})}),a&&e.jsxs(o,{className:"mt-6",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{children:"✅ 업로드 완료"}),a.itemCount&&e.jsxs("div",{children:["처리된 항목: ",a.itemCount,"개"]}),a.duplicates&&e.jsxs("div",{children:["중복 발견: ",a.duplicates,"개"]}),a.validationErrors&&e.jsxs("div",{children:["검증 오류: ",a.validationErrors,"개"]})]})})]}),e.jsxs(o,{children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsx("div",{children:"• Excel 파일(.xlsx, .xls)만 지원됩니다"}),e.jsx("div",{children:"• 파일 크기는 10MB 이하여야 합니다"}),e.jsx("div",{children:"• 중복 검출 및 자동 검증이 수행됩니다"})]})})]})]})]})})}export{U as default};
