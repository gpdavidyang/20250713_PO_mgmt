import{a as V,u as f,b as y,j as e}from"./chunk-D67rGsji.js";import{r as u}from"./chunk-BgLp_VvL.js";import{B as i,L as o,I as m,C as S,g as $}from"./chunk-DV-F1ehd.js";import{B as p}from"./chunk-Bw5QEQRA.js";import{D as _,m as W,a as X,b as Y,c as Z,u as ee,n as se,o as te,p as k,r as x,s as ae,t as h}from"./chunk-bdHBeqB0.js";import{A as L,a as E,b as q,c as z,d as B,e as O,f as H,g as K,h as Q}from"./chunk-BwMTeAUG.js";import{U as ie,z as re,aJ as le,aK as ne,av as I,K as J,aN as ce,a8 as de,w as oe}from"./chunk-CVirgo2y.js";import"./chunk-CZez8RVl.js";import"./chunk-CFxRDIMf.js";function me(){return V({queryKey:["/api/positions"]})}function xe(){const a=f();return y({mutationFn:async n=>{const c=await fetch("/api/positions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!c.ok)throw new Error("Failed to create position");return c.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/positions"]})}})}function he(){const a=f();return y({mutationFn:async({id:n,data:c})=>{const d=await fetch(`/api/positions/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok)throw new Error("Failed to update position");return d.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/positions"]})}})}function ue(){const a=f();return y({mutationFn:async n=>{if(!(await fetch(`/api/positions/${n}`,{method:"DELETE"})).ok)throw new Error("Failed to delete position")},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/positions"]})}})}function we(){const[a,n]=u.useState(""),[c,d]=u.useState(!1),[j,g]=u.useState(null),[N,b]=u.useState("table"),[r,l]=u.useState({positionCode:"",positionName:"",level:1,department:"",description:"",isActive:!0}),{data:M=[],isLoading:U}=me(),C=xe(),w=he(),G=ue(),v=M.filter(s=>s.positionName.toLowerCase().includes(a.toLowerCase())||s.positionCode.toLowerCase().includes(a.toLowerCase())||s.department&&s.department.toLowerCase().includes(a.toLowerCase())),A=()=>{l({positionCode:"",positionName:"",level:1,department:"",description:"",isActive:!0})},D=s=>{g(s),l({positionCode:s.positionCode,positionName:s.positionName,level:s.level,department:s.department||"",description:s.description||"",isActive:s.isActive??!0}),d(!0)},R=async s=>{s.preventDefault();try{j?await w.mutateAsync({id:j.id,data:r}):await C.mutateAsync(r),d(!1),g(null),A()}catch(t){console.error("Failed to save position:",t)}},P=async s=>{try{await G.mutateAsync(s)}catch(t){console.error("Failed to delete position:",t)}},T=s=>s<=2?"bg-red-100 text-red-800 border-red-200":s<=4?"bg-orange-100 text-orange-800 border-orange-200":s<=6?"bg-yellow-100 text-yellow-800 border-yellow-200":s<=8?"bg-green-100 text-green-800 border-green-200":"bg-blue-100 text-blue-800 border-blue-200",F=s=>s<=2?"임원급":s<=4?"부장급":s<=6?"차장급":s<=8?"과장급":"사원급";return U?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-lg text-gray-600",children:"로딩 중..."})})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ie,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"직급 관리"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"조직 내 직급 체계를 관리하고 설정합니다"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(p,{variant:"outline",className:"text-sm",children:["총 ",v.length,"개"]}),e.jsxs(_,{open:c,onOpenChange:d,children:[e.jsx(W,{asChild:!0,children:e.jsxs(i,{className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{g(null),A()},children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"직급 추가"]})}),e.jsxs(X,{className:"max-w-lg",children:[e.jsx(Y,{children:e.jsx(Z,{children:j?"직급 편집":"새 직급 추가"})}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"positionCode",className:"text-sm font-medium",children:"직급 코드"}),e.jsx(m,{id:"positionCode",value:r.positionCode,onChange:s=>l(t=>({...t,positionCode:s.target.value})),placeholder:"예: CEO, VP_ENG",className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"positionName",className:"text-sm font-medium",children:"직급명"}),e.jsx(m,{id:"positionName",value:r.positionName,onChange:s=>l(t=>({...t,positionName:s.target.value})),placeholder:"예: 최고경영자, 개발팀장",className:"mt-1",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"level",className:"text-sm font-medium",children:"레벨"}),e.jsx(m,{id:"level",type:"number",min:"1",max:"10",value:r.level,onChange:s=>l(t=>({...t,level:parseInt(s.target.value)||1})),className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"department",className:"text-sm font-medium",children:"부서"}),e.jsx(m,{id:"department",value:r.department||"",onChange:s=>l(t=>({...t,department:s.target.value})),placeholder:"예: 경영진, 개발팀",className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"description",className:"text-sm font-medium",children:"설명"}),e.jsx(m,{id:"description",value:r.description||"",onChange:s=>l(t=>({...t,description:s.target.value})),placeholder:"직급에 대한 설명을 입력하세요",className:"mt-1"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{id:"isActive",checked:r.isActive,onCheckedChange:s=>l(t=>({...t,isActive:s}))}),e.jsx(o,{htmlFor:"isActive",className:"text-sm",children:"활성 상태"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>d(!1),children:"취소"}),e.jsx(i,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",disabled:C.isPending||w.isPending,children:j?"수정":"추가"})]})]})]})]})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx(m,{placeholder:"직급 이름, 코드, 부서로 검색...",value:a,onChange:s=>n(s.target.value),className:"h-10"})}),e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[e.jsx(i,{variant:N==="table"?"default":"ghost",size:"sm",onClick:()=>b("table"),className:"h-8 w-8 p-0",title:"테이블 보기",children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx(i,{variant:N==="card"?"default":"ghost",size:"sm",onClick:()=>b("card"),className:"h-8 w-8 p-0",title:"카드 보기",children:e.jsx(ne,{className:"h-4 w-4"})})]})]})}),N==="table"?e.jsx(S,{children:e.jsx($,{className:"p-0",children:e.jsxs(se,{children:[e.jsx(te,{children:e.jsxs(k,{className:"border-b border-gray-200 bg-gray-50",children:[e.jsx(x,{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"직급명"}),e.jsx(x,{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"코드"}),e.jsx(x,{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"레벨"}),e.jsx(x,{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"부서"}),e.jsx(x,{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"상태"}),e.jsx(x,{className:"text-left py-3 px-4 text-sm font-medium text-gray-900",children:"작업"})]})}),e.jsx(ae,{children:v.map(s=>e.jsxs(k,{className:"hover:bg-gray-50 border-b border-gray-200",children:[e.jsx(h,{className:"py-3 px-4 text-sm",children:e.jsx("div",{className:"font-medium text-gray-900",children:s.positionName})}),e.jsx(h,{className:"py-3 px-4 text-sm text-gray-600",children:s.positionCode}),e.jsx(h,{className:"py-3 px-4 text-sm",children:e.jsx(p,{className:T(s.level),children:F(s.level)})}),e.jsx(h,{className:"py-3 px-4 text-sm text-gray-600",children:s.department||"-"}),e.jsx(h,{className:"py-3 px-4 text-sm",children:e.jsx(p,{variant:s.isActive?"default":"secondary",children:s.isActive?"활성":"비활성"})}),e.jsx(h,{className:"py-3 px-4 text-sm",children:e.jsxs("div",{className:"flex items-center gap-1 -space-x-1",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>D(s),className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50",title:"편집",children:e.jsx(I,{className:"h-3 w-3"})}),e.jsxs(L,{children:[e.jsx(E,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",title:"삭제",children:e.jsx(J,{className:"h-3 w-3"})})}),e.jsxs(q,{children:[e.jsxs(z,{children:[e.jsx(B,{children:"직급 삭제"}),e.jsx(O,{children:"이 직급을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."})]}),e.jsxs(H,{children:[e.jsx(K,{children:"취소"}),e.jsx(Q,{onClick:()=>P(s.id),className:"bg-red-600 hover:bg-red-700",children:"삭제"})]})]})]})]})})]},s.id))})]})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(s=>e.jsx(S,{className:"p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:s.positionName})}),e.jsx(p,{variant:s.isActive?"default":"secondary",children:s.isActive?"활성":"비활성"})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 gap-2",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"코드:"}),e.jsx("span",{children:s.positionCode})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"레벨:"}),e.jsx(p,{className:T(s.level),children:F(s.level)})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"부서:"}),e.jsx("span",{children:s.department||"-"})]})]}),s.description&&e.jsx("div",{className:"pt-2 border-t",children:e.jsx("p",{className:"text-sm text-gray-600",children:s.description})}),e.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:e.jsx("span",{children:"등록: 직급 관리"})}),e.jsx("div",{className:"flex items-center justify-end pt-2 border-t",children:e.jsxs("div",{className:"flex items-center -space-x-1",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>D(s),className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50",title:"편집",children:e.jsx(I,{className:"h-3 w-3"})}),e.jsxs(L,{children:[e.jsx(E,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",title:"삭제",children:e.jsx(J,{className:"h-3 w-3"})})}),e.jsxs(q,{children:[e.jsxs(z,{children:[e.jsx(B,{children:"직급 삭제"}),e.jsx(O,{children:"이 직급을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."})]}),e.jsxs(H,{children:[e.jsx(K,{children:"취소"}),e.jsx(Q,{onClick:()=>P(s.id),className:"bg-red-600 hover:bg-red-700",children:"삭제"})]})]})]})]})})]})},s.id))})]})}export{we as default};
