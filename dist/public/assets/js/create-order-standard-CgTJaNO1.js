import{u as ue,a as q,b as ee,j as e}from"./chunk-D67rGsji.js";import{r as y}from"./chunk-BgLp_VvL.js";import{u as Me}from"./chunk-CFxRDIMf.js";import{l as be,B as n,L as c,I as b,C as A,h as _,i as B,g as E,f as xe}from"./chunk-DV-F1ehd.js";import{B as D}from"./chunk-Bw5QEQRA.js";import{D as me,m as Re,a as he,b as ge,c as pe,S as v,h as N,i as f,j as w,k as x,g as Y,f as Ue}from"./chunk-bdHBeqB0.js";import{C as je}from"./chunk-Qrbxos93.js";import{g as _e,f as re,r as U}from"./chunk--mTpk5at.js";import{z as Be,av as te,K as H,F as X,I as He,aF as le,J as Qe,ay as We,a as Ze,a1 as Ge,a3 as ie,Z as ne,au as Je,a4 as Ye,a5 as Xe,aG as es,D as ss,d as ye}from"./chunk-CVirgo2y.js";import{h as as,E as rs}from"./chunk-DWlBX1KS.js";import"./chunk-CZez8RVl.js";import"./index-B9Zn91qv.js";function ts({onCategorySelect:g,selectedCategory:$}={}){const{toast:F}=be(),d=ue(),[S,m]=y.useState(!1),[o,h]=y.useState(null),[p,V]=y.useState({categoryType:"major",categoryValue:"",parentId:null,displayOrder:0}),{data:K=[]}=q({queryKey:["/api/item-categories"],queryFn:()=>Y("GET","/api/item-categories")}),P=ee({mutationFn:r=>Y("POST","/api/item-categories",r),onSuccess:()=>{d.invalidateQueries({queryKey:["/api/item-categories"]}),m(!1),V({categoryType:"major",categoryValue:"",parentId:null,displayOrder:0}),F({title:"분류 추가 완료",description:"새로운 분류가 추가되었습니다."})},onError:()=>{F({title:"오류",description:"분류 추가 중 오류가 발생했습니다.",variant:"destructive"})}}),M=ee({mutationFn:({id:r,data:C})=>Y("PUT",`/api/item-categories/${r}`,C),onSuccess:()=>{d.invalidateQueries({queryKey:["/api/item-categories"]}),h(null),F({title:"분류 수정 완료",description:"분류가 수정되었습니다."})},onError:()=>{F({title:"오류",description:"분류 수정 중 오류가 발생했습니다.",variant:"destructive"})}}),z=ee({mutationFn:r=>Y("DELETE",`/api/item-categories/${r}`),onSuccess:()=>{d.invalidateQueries({queryKey:["/api/item-categories"]}),F({title:"분류 삭제 완료",description:"분류가 삭제되었습니다."})},onError:()=>{F({title:"오류",description:"분류 삭제 중 오류가 발생했습니다.",variant:"destructive"})}}),Q=K.filter(r=>r.categoryType==="major"),W=K.filter(r=>r.categoryType==="middle"),R=K.filter(r=>r.categoryType==="minor"),de=()=>{if(!p.categoryValue.trim()){F({title:"입력 오류",description:"분류명을 입력해주세요.",variant:"destructive"});return}P.mutate(p)},T=r=>{h(r)},u=()=>{o&&M.mutate({id:o.id,data:{categoryValue:o.categoryValue,displayOrder:o.displayOrder}})},L=r=>{confirm("정말로 이 분류를 삭제하시겠습니까?")&&z.mutate(r)},se=r=>r==="major"?[]:r==="middle"?Q:r==="minor"?W:[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"품목 분류 관리"}),e.jsxs(me,{open:S,onOpenChange:m,children:[e.jsx(Re,{asChild:!0,children:e.jsxs(n,{children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"분류 추가"]})}),e.jsxs(he,{children:[e.jsx(ge,{children:e.jsx(pe,{children:"새 분류 추가"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"categoryType",children:"분류 유형"}),e.jsxs(v,{value:p.categoryType,onValueChange:r=>V({...p,categoryType:r,parentId:null}),children:[e.jsx(N,{children:e.jsx(f,{})}),e.jsxs(w,{children:[e.jsx(x,{value:"major",children:"대분류"}),e.jsx(x,{value:"middle",children:"중분류"}),e.jsx(x,{value:"minor",children:"소분류"})]})]})]}),p.categoryType!=="major"&&e.jsxs("div",{children:[e.jsx(c,{htmlFor:"parentId",children:"상위 분류"}),e.jsxs(v,{value:p.parentId?.toString()||"",onValueChange:r=>V({...p,parentId:r?parseInt(r):null}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"상위 분류를 선택하세요"})}),e.jsx(w,{children:se(p.categoryType).map(r=>e.jsx(x,{value:r.id.toString(),children:r.categoryValue},r.id))})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"categoryValue",children:"분류명"}),e.jsx(b,{id:"categoryValue",value:p.categoryValue,onChange:r=>V({...p,categoryValue:r.target.value}),placeholder:"분류명을 입력하세요"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"displayOrder",children:"표시 순서"}),e.jsx(b,{id:"displayOrder",type:"number",value:p.displayOrder,onChange:r=>V({...p,displayOrder:parseInt(r.target.value)||0})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{onClick:de,disabled:P.isPending,children:"추가"}),e.jsx(n,{variant:"outline",onClick:()=>m(!1),children:"취소"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(A,{children:[e.jsx(_,{children:e.jsx(B,{children:"대분류"})}),e.jsx(E,{children:e.jsx("div",{className:"space-y-2",children:Q.map(r=>e.jsx("div",{className:"flex items-center justify-between p-2 border rounded",children:o?.id===r.id?e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx(b,{value:o.categoryValue,onChange:C=>h({...o,categoryValue:C.target.value}),className:"h-8"}),e.jsx(n,{size:"sm",onClick:u,children:"저장"}),e.jsx(n,{size:"sm",variant:"outline",onClick:()=>h(null),children:"취소"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`cursor-pointer hover:text-blue-600 ${$?.id===r.id?"text-blue-600 font-semibold":""}`,onClick:()=>g?.(r),children:r.categoryValue}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>T(r),children:e.jsx(te,{className:"h-3 w-3"})}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>L(r.id),children:e.jsx(H,{className:"h-3 w-3"})})]})]})},r.id))})})]}),e.jsxs(A,{children:[e.jsx(_,{children:e.jsx(B,{children:"중분류"})}),e.jsx(E,{children:e.jsx("div",{className:"space-y-2",children:W.map(r=>e.jsx("div",{className:"flex items-center justify-between p-2 border rounded",children:o?.id===r.id?e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx(b,{value:o.categoryValue,onChange:C=>h({...o,categoryValue:C.target.value}),className:"h-8"}),e.jsx(n,{size:"sm",onClick:u,children:"저장"}),e.jsx(n,{size:"sm",variant:"outline",onClick:()=>h(null),children:"취소"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`cursor-pointer hover:text-blue-600 ${$?.id===r.id?"text-blue-600 font-semibold":""}`,onClick:()=>g?.(r),children:r.categoryValue}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>T(r),children:e.jsx(te,{className:"h-3 w-3"})}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>L(r.id),children:e.jsx(H,{className:"h-3 w-3"})})]})]})},r.id))})})]}),e.jsxs(A,{children:[e.jsx(_,{children:e.jsx(B,{children:"소분류"})}),e.jsx(E,{children:e.jsx("div",{className:"space-y-2",children:R.map(r=>e.jsx("div",{className:"flex items-center justify-between p-2 border rounded",children:o?.id===r.id?e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx(b,{value:o.categoryValue,onChange:C=>h({...o,categoryValue:C.target.value}),className:"h-8"}),e.jsx(n,{size:"sm",onClick:u,children:"저장"}),e.jsx(n,{size:"sm",variant:"outline",onClick:()=>h(null),children:"취소"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`cursor-pointer hover:text-blue-600 ${$?.id===r.id?"text-blue-600 font-semibold":""}`,onClick:()=>g?.(r),children:r.categoryValue}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>T(r),children:e.jsx(te,{className:"h-3 w-3"})}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>L(r.id),children:e.jsx(H,{className:"h-3 w-3"})})]})]})},r.id))})})]})]}),e.jsx(me,{open:!!o,onOpenChange:()=>h(null),children:e.jsxs(he,{children:[e.jsx(ge,{children:e.jsx(pe,{children:"분류 수정"})}),o&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"editCategoryValue",children:"분류명"}),e.jsx(b,{id:"editCategoryValue",value:o.categoryValue,onChange:r=>h({...o,categoryValue:r.target.value})})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"editDisplayOrder",children:"표시 순서"}),e.jsx(b,{id:"editDisplayOrder",type:"number",value:o.displayOrder,onChange:r=>h({...o,displayOrder:parseInt(r.target.value)||0})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{onClick:u,disabled:M.isPending,children:"저장"}),e.jsx(n,{variant:"outline",onClick:()=>h(null),children:"취소"})]})]})]})})]})}function us(){const{toast:g}=be(),$=ue(),[,F]=Me(),[d,S]=y.useState({site:"",deliveryDate:"",isNegotiable:!1,receiver:"",manager:"",notes:"",items:[]}),[m,o]=y.useState([ce()]),[h,p]=y.useState([]),[V,K]=y.useState(!1),[P,M]=y.useState("draft"),[z]=y.useState(_e()),[Q]=y.useState(!0),[W,R]=y.useState(!1),[de,T]=y.useState(!1),[u,L]=y.useState(100),[se,r]=y.useState(!1),{data:C=[]}=q({queryKey:["/api/projects"],select:s=>s?.filter(l=>l.isActive)||[]}),{data:ve}=q({queryKey:["/api/auth/user"]}),{data:Z=[]}=q({queryKey:["/api/users"],select:s=>s?.filter(l=>l.isActive)||[]}),{data:G=[]}=q({queryKey:["/api/vendors"],select:s=>s?.filter(l=>l.isActive)||[]}),{data:Ne=[]}=q({queryKey:["/api/item-categories/major"],queryFn:()=>fetch("/api/item-categories/major").then(s=>s.json())}),{data:fe=[]}=q({queryKey:["/api/item-categories/middle"],queryFn:()=>fetch("/api/item-categories/middle").then(s=>s.json())}),{data:we=[]}=q({queryKey:["/api/item-categories/minor"],queryFn:()=>fetch("/api/item-categories/minor").then(s=>s.json())}),Ce=ee({mutationFn:async s=>{const l=new FormData;l.append("orderData",JSON.stringify(s)),h.forEach((a,i)=>{l.append("attachments",a)}),console.log("Form submission - uploadedFiles count:",h.length),console.log("Form submission - files being sent:",h.map(a=>a.name)),console.log("FormData keys being sent:");for(let[a,i]of l.entries())i instanceof File?console.log(`  ${a}: File(${i.name}, ${i.size}bytes, ${i.type})`):console.log(`  ${a}: ${typeof i=="string"?i.substring(0,100)+"...":i}`);const t=await fetch("/api/orders",{method:"POST",body:l});if(!t.ok)throw new Error("Failed to create order");return t.json()},onSuccess:s=>{$.invalidateQueries({queryKey:["/api/orders"]}),$.invalidateQueries({queryKey:["/api/approvals"]}),s?.id&&F(`/orders/${s.id}/standard`)}});function ce(){return{category:"",subCategory1:"",subCategory2:"",item:"",name:"",quantity:"",unit:"",unitPrice:"",price:0,vendor:"",deliveryLocation:""}}function k(s,l,t){const a=[...m];if(l==="quantity"||l==="unitPrice"){const i=U(t);a[s]={...a[s],[l]:i};const I=Number.parseFloat(U(a[s].quantity)||"0"),j=Number.parseFloat(U(a[s].unitPrice)||"0");a[s].price=I*j}else a[s]={...a[s],[l]:t};o(a)}function ke(){o([...m,ce()])}function Fe(s){if(m.length>1){const l=m.filter((t,a)=>a!==s);o(l)}}function De(s){const l={...m[s]},t=[...m];t.splice(s+1,0,l),o(t)}function Se(s){const l=s.target.files;if(l){const t=Array.from(l);p(a=>[...a,...t]),g({title:"파일 업로드 완료",description:`${t.length}개 파일이 업로드되었습니다.`})}}function Ve(s){p(l=>l.filter((t,a)=>a!==s))}const J=m.reduce((s,l)=>s+l.price,0),Pe=()=>{g({title:"임시저장 완료",description:"발주서가 임시저장되었습니다."})},Ie=async()=>{if(!d.site){g({title:"필수 정보 누락",description:"현장을 선택해주세요.",variant:"destructive"});return}if(!d.receiver){g({title:"필수 정보 누락",description:"자재 인수자를 선택해주세요.",variant:"destructive"});return}if(m.length===0||!m.some(s=>s.item.trim())){g({title:"필수 정보 누락",description:"최소 하나의 품목을 입력해주세요.",variant:"destructive"});return}try{const s={},l=m.filter(i=>i.item.trim());l.forEach(i=>{i.vendor&&(s[i.vendor]=(s[i.vendor]||0)+1)});let t;if(Object.keys(s).length>0){const i=Object.keys(s).reduce((j,O)=>s[j]>s[O]?j:O);t=G.find(j=>j.name===i)?.id}const a={orderNumber:z,projectId:parseInt(d.site),vendorId:t||void 0,userId:ve?.id||"USR_20250531_001",orderDate:new Date,deliveryDate:d.deliveryDate?new Date(d.deliveryDate):void 0,totalAmount:J,notes:d.notes||void 0,status:"pending",currentApproverRole:"project_manager",approvalLevel:1,templateId:void 0,items:l.map(i=>({itemName:i.item,quantity:parseFloat(i.quantity)||0,unitPrice:parseFloat(U(i.unitPrice))||0,totalAmount:i.price||0,specification:i.name||void 0,notes:`${i.category}/${i.subCategory1}/${i.subCategory2}`.replace(/\/+/g,"/").replace(/^\/|\/$/g,"")||void 0}))};await Ce.mutateAsync(a),M("pending"),T(!1),g({title:"승인 요청 완료",description:"발주서가 데이터베이스에 저장되고 승인 요청되었습니다."})}catch(s){console.error("Order creation error:",s),g({title:"저장 실패",description:"발주서 저장 중 오류가 발생했습니다.",variant:"destructive"})}},qe=()=>{M("skipped"),T(!1),g({title:"승인 생략",description:"발주서 승인이 생략되었습니다."})},ze=()=>{R(!0)};async function Le(){const s=document.getElementById("pdf-preview-content");if(!s){g({title:"오류",description:"PDF 내용을 찾을 수 없습니다.",variant:"destructive"});return}try{const l=await as(s,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:s.scrollWidth,height:s.scrollHeight}),t=l.toDataURL("image/png"),a=new rs("p","mm","a4"),i=a.internal.pageSize.getWidth(),I=a.internal.pageSize.getHeight(),j=l.width,O=l.height,ae=Math.min(i/j,I/O),Ke=(i-j*ae)/2;a.addImage(t,"PNG",Ke,0,j*ae,O*ae);const oe=`발주서_${z}_${new Date().toLocaleDateString("ko-KR").replace(/\./g,"")}.pdf`;a.save(oe),g({title:"PDF 다운로드 완료",description:`${oe} 파일이 다운로드되었습니다.`})}catch(l){console.error("PDF 생성 오류:",l),g({title:"PDF 생성 실패",description:"PDF 파일 생성 중 오류가 발생했습니다.",variant:"destructive"})}}function Oe(){if(!W)return null;const s=C.find(a=>a.id.toString()===d.site),l=Z.find(a=>a.id===d.receiver),t=Z.find(a=>a.id===d.manager);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>R(!1),className:"gap-2",children:[e.jsx(Je,{className:"w-4 h-4"}),"돌아가기"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"font-medium",children:"발주서 PDF 미리보기"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 border rounded px-2 py-1 bg-white",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>L(a=>Math.max(50,a-25)),disabled:u<=50,className:"h-7 w-7 p-0",children:e.jsx(Ye,{className:"w-3 h-3"})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 px-2 min-w-[60px] text-center",children:[u,"%"]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>L(a=>Math.min(200,a+25)),disabled:u>=200,className:"h-7 w-7 p-0",children:e.jsx(Xe,{className:"w-3 h-3"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>L(100),className:"h-7 w-7 p-0",title:"원래 크기로",children:e.jsx(es,{className:"w-3 h-3"})})]}),e.jsxs(n,{variant:"default",size:"sm",onClick:Le,className:"gap-2 bg-blue-600 hover:bg-blue-700",children:[e.jsx(ss,{className:"w-4 h-4"}),"PDF 다운로드"]}),e.jsx(D,{variant:"outline",children:z}),e.jsx(D,{variant:"secondary",children:"승인 완료"})]})]}),e.jsx("div",{className:"p-2 overflow-auto max-h-[calc(90vh-80px)] bg-gray-50",children:e.jsxs("div",{id:"pdf-preview-content",className:"bg-white shadow-sm mx-auto transition-transform duration-200",style:{width:`${180*(u/100)}mm`,minHeight:`${240*(u/100)}mm`,padding:`${10*(u/100)}mm`,fontSize:`${9*(u/100)}px`,transform:"scale(1)",transformOrigin:"top center"},children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"표준 발주서"})}),e.jsxs("div",{className:"border border-gray-300",style:{width:"200px"},children:[e.jsx("div",{className:"grid grid-cols-5 border-b border-gray-300",children:["담당","공무","팀장","임원","사장"].map((a,i)=>e.jsx("div",{className:"h-8 border-r border-gray-300 last:border-r-0 flex items-center justify-center text-xs font-medium text-gray-700 bg-gray-50",style:{width:"40px"},children:a},a))}),e.jsx("div",{className:"grid grid-cols-5 h-8",children:Array(5).fill(null).map((a,i)=>e.jsx("div",{className:"border-r border-gray-300 last:border-r-0 bg-white",style:{width:"40px"}},i))})]})]}),e.jsx("div",{className:"border-b border-gray-300 mb-3"}),e.jsx("div",{className:"mb-3",children:e.jsx("h3",{className:"font-bold text-gray-900 mb-2 text-xs bg-gray-50 px-2 py-1 border-l-3 border-blue-500",children:"발주서 기본 정보"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-4",children:[e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-bold text-gray-800 w-18",children:"발주서 번호:"}),e.jsx("span",{className:"text-gray-900",children:z})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-bold text-gray-800 w-18",children:"현장:"}),e.jsx("span",{className:"text-gray-900",children:s?.projectName||"현장명 없음"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-bold text-gray-800 w-18",children:"현장 주소:"}),e.jsx("span",{className:"text-gray-900",children:s?.location||"현장 주소 없음"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-bold text-gray-800 w-18",children:"납품희망일:"}),e.jsx("span",{className:"text-gray-900",children:d.deliveryDate||new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-bold text-gray-800 w-18",children:"작성일:"}),e.jsx("span",{className:"text-gray-900",children:new Date().toLocaleDateString("ko-KR")})]})]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-bold text-gray-800 w-18",children:"자재 인수자:"}),e.jsx("span",{className:"text-gray-900",children:l?`${l.name} (${l.phoneNumber||"010-0000-0000"})`:"인수자 미지정"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-bold text-gray-800 w-18",children:"본사 담당자:"}),e.jsx("span",{className:"text-gray-900",children:t?`${t.name} (${t.phoneNumber||"010-0000-0000"})`:"담당자 미지정"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-bold text-gray-800 w-18",children:"승인 상태:"}),e.jsx("span",{className:"text-blue-600 font-semibold",children:"승인 완료"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"font-bold text-gray-800 w-18",children:"승인일:"}),e.jsx("span",{className:"text-gray-900",children:new Date().toLocaleDateString("ko-KR")})]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2 text-xs bg-gray-50 px-2 py-1 border-l-3 border-blue-500",children:"거래처"}),(()=>{const a=Array.from(new Set(m.filter(i=>i.vendor).map(i=>i.vendor)));return a.length===0?e.jsx("div",{className:"text-gray-500 text-xs italic",children:"거래처가 선택되지 않았습니다."}):a.map((i,I)=>{const j=G.find(O=>O.name===i);return e.jsxs("div",{className:"bg-white border border-gray-200 p-2 space-y-0.5 text-xs mb-1 shadow-sm",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:i}),e.jsxs("div",{className:"text-gray-700",children:["주소: ",j?.address||"주소 정보 없음"]}),e.jsxs("div",{className:"text-gray-700",children:["전화: ",j?.phone||"연락처 없음"," | 이메일: ",j?.email||"이메일 없음"]})]},I)})})()]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2 text-xs bg-gray-50 px-2 py-1 border-l-3 border-green-500",children:"납품처"}),(()=>{const a=Array.from(new Set(m.filter(i=>i.deliveryLocation).map(i=>i.deliveryLocation)));return a.length===0?e.jsx("div",{className:"text-gray-500 text-xs italic",children:"납품처가 선택되지 않았습니다."}):a.map((i,I)=>e.jsxs("div",{className:"bg-white border border-gray-200 p-2 space-y-0.5 text-xs mb-1 shadow-sm",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:i}),e.jsxs("div",{className:"text-gray-700",children:["주소: ",s?.location||"현장 주소 정보 없음"]}),e.jsxs("div",{className:"text-gray-700",children:["담당자: ",l?.name||"담당자 미지정"]})]},I))})()]})]})}),e.jsx("div",{className:"mb-3",children:e.jsx("h3",{className:"font-bold text-gray-900 mb-2 text-xs bg-gray-50 px-2 py-1 border-l-3 border-green-500",children:"품목 리스트"})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("table",{className:"w-full border-collapse border border-gray-300 text-[9px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"border-b border-r border-gray-300 px-1 py-1 text-center font-medium text-gray-700",style:{width:"25px"},children:"No"}),e.jsx("th",{className:"border-b border-r border-gray-300 px-1 py-1 text-center font-medium text-gray-700",style:{width:"60px"},children:"대분류"}),e.jsx("th",{className:"border-b border-r border-gray-300 px-1 py-1 text-center font-medium text-gray-700",style:{width:"60px"},children:"중분류"}),e.jsx("th",{className:"border-b border-r border-gray-300 px-1 py-1 text-center font-medium text-gray-700",style:{width:"50px"},children:"소분류"}),e.jsx("th",{className:"border-b border-r border-gray-300 px-1 py-1 text-center font-medium text-gray-700",style:{width:"100px"},children:"품목명"}),e.jsx("th",{className:"border-b border-r border-gray-300 px-1 py-1 text-center font-medium text-gray-700",style:{width:"50px"},children:"수량"}),e.jsx("th",{className:"border-b border-r border-gray-300 px-1 py-1 text-center font-medium text-gray-700",style:{width:"35px"},children:"단위"}),e.jsx("th",{className:"border-b border-r border-gray-300 px-1 py-1 text-center font-medium text-gray-700",style:{width:"60px"},children:"단가"}),e.jsx("th",{className:"border-b border-r border-gray-300 px-1 py-1 text-center font-medium text-gray-700",style:{width:"70px"},children:"금액"}),e.jsx("th",{className:"border-b border-r border-gray-300 px-1 py-1 text-center font-medium text-gray-700",style:{width:"60px"},children:"거래처"}),e.jsx("th",{className:"border-b border-gray-300 px-1 py-1 text-center font-medium text-gray-700",style:{width:"60px"},children:"납품처"})]})}),e.jsx("tbody",{children:m.length>0&&m.filter(a=>a.item).length>0?m.filter(a=>a.item).map((a,i)=>e.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-25",children:[e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-center text-gray-800",children:i+1}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-gray-800",children:a.category||"건축자재"}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-gray-800",children:a.subCategory1||"철근"}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-gray-800",children:a.subCategory2||"-"}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-gray-800",children:a.item}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-center text-gray-800",children:re(a.quantity)}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-center text-gray-800",children:a.unit||"kg"}),e.jsxs("td",{className:"border-r border-gray-300 px-1 py-1 text-right text-gray-800",children:["₩",Number(U(a.unitPrice)).toLocaleString()]}),e.jsxs("td",{className:"border-r border-gray-300 px-1 py-1 text-right font-medium text-gray-900",children:["₩",a.price.toLocaleString()]}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-gray-800",children:a.vendor||"한국철강"}),e.jsx("td",{className:"px-1 py-1 text-gray-800",children:a.deliveryLocation||"현장사 창고"})]},i)):e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-center text-gray-500 border-b border-gray-200",children:"-"}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-gray-500 border-b border-gray-200",children:"품목이 없습니다"}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-gray-500 border-b border-gray-200",children:"-"}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-gray-500 border-b border-gray-200",children:"-"}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-gray-500 border-b border-gray-200",children:"-"}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-center text-gray-500 border-b border-gray-200",children:"-"}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-center text-gray-500 border-b border-gray-200",children:"-"}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-right text-gray-500 border-b border-gray-200",children:"-"}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-right text-gray-500 border-b border-gray-200",children:"-"}),e.jsx("td",{className:"border-r border-gray-300 px-1 py-1 text-gray-500 border-b border-gray-200",children:"-"}),e.jsx("td",{className:"px-1 py-1 text-gray-500 border-b border-gray-200",children:"-"})]})})})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx("div",{className:"bg-gray-50 border-transparent px-4 py-2 rounded-sm",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-900",children:["총 금액: ₩",J>0?J.toLocaleString():"0"]}),e.jsx("div",{className:"text-[10px] text-gray-600",children:"(부가세 별도)"})]})})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-2 text-xs bg-gray-50 px-2 py-1 border-l-3 border-purple-500",children:"첨부 파일"}),e.jsx("div",{className:"grid grid-cols-4 gap-2 text-[9px]",children:h.length>0?h.map((a,i)=>e.jsxs("div",{className:"flex items-center space-x-1 bg-white border border-gray-200 px-2 py-1 rounded shadow-sm",children:[e.jsx(X,{className:"h-3 w-3 text-blue-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-gray-900 font-medium truncate",children:a.name}),e.jsxs("div",{className:"text-gray-500",children:[(a.size/1024/1024).toFixed(1),"MB"]})]})]},i)):e.jsx("div",{className:"col-span-4 text-gray-500 italic text-center py-1",children:"첨부된 파일이 없습니다."})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-2 text-xs bg-gray-50 px-2 py-1 border-l-3 border-orange-500",children:"특이사항"}),e.jsx("div",{className:"text-xs bg-white border-transparent p-2 min-h-[20px]",children:d.notes?e.jsx("div",{className:"whitespace-pre-wrap text-gray-900",children:d.notes}):e.jsx("div",{className:"text-gray-500 italic",children:"특이사항이 입력되지 않았습니다."})})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t-2 border-gray-900 text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx("img",{src:"/attached_assets/ikjin-logo.png",alt:"익진엔지니어링 로고",className:"h-4 object-contain company-logo"})}),e.jsxs("div",{className:"text-[10px] text-gray-700 space-y-0.5 leading-relaxed",children:[e.jsx("div",{className:"font-medium",children:"서울특별시 강남구 테헤란로 124 삼원타워 9층"}),e.jsx("div",{children:"대표전화: 02-557-9043 | 이메일: ikjin100@ikjin.co.kr"})]})]})]})})]})})}const $e=()=>{g({title:"이메일 발송",description:"발주서가 이메일로 발송되었습니다."})},Te=()=>{switch(P){case"draft":return e.jsxs(D,{variant:"secondary",className:"bg-gray-100 text-gray-800",children:[e.jsx(ye,{className:"w-3 h-3 mr-1"}),"작성중"]});case"pending":return e.jsxs(D,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[e.jsx(ye,{className:"w-3 h-3 mr-1"}),"승인 대기중"]});case"approved":return e.jsxs(D,{className:"bg-green-100 text-green-800 border-green-200",children:[e.jsx(ne,{className:"w-3 h-3 mr-1"}),"승인 완료"]});case"skipped":return e.jsxs(D,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"승인 생략"]});case"rejected":return e.jsxs(D,{variant:"destructive",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"승인 반려"]});default:return null}},Ae=P==="approved"||P==="skipped",Ee=()=>{R(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"표준 발주서 작성"}),e.jsx("p",{className:"text-sm text-gray-600",children:"통합된 표준 발주서를 작성합니다"})]}),Te()]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{variant:"outline",className:"text-xs",children:z}),e.jsx(D,{variant:"outline",className:"text-xs",children:new Date().toLocaleDateString("ko-KR")})]})]}),e.jsxs(A,{className:"shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(_,{className:"bg-gray-50 border-b p-3",children:e.jsxs(B,{className:"text-base font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4 text-blue-600"}),"기본 정보 입력"]})}),e.jsx(E,{className:"p-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{htmlFor:"site",className:"text-sm font-medium",children:"현장 선택"}),e.jsxs(v,{value:d.site,onValueChange:s=>S({...d,site:s}),children:[e.jsx(N,{className:"h-8 text-sm",children:e.jsx(f,{placeholder:"현장을 선택하세요"})}),e.jsx(w,{children:C.map(s=>e.jsxs(x,{value:s.id.toString(),children:[s.projectName," - ",s.projectCode]},s.id))})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{className:"text-sm font-medium",children:"납품희망일"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(b,{type:"date",className:"flex-1 h-8 text-sm",disabled:V,value:d.deliveryDate,onChange:s=>S({...d,deliveryDate:s.target.value})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(je,{id:"negotiable",checked:V,onCheckedChange:s=>{K(s),S({...d,isNegotiable:s})},className:"h-4 w-4"}),e.jsx(c,{htmlFor:"negotiable",className:"text-xs",children:"협의"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{htmlFor:"receiver",className:"text-sm font-medium",children:"자재 인수자"}),e.jsxs(v,{value:d.receiver,onValueChange:s=>S({...d,receiver:s}),children:[e.jsx(N,{className:"h-8 text-sm",children:e.jsx(f,{placeholder:"인수자를 선택하세요"})}),e.jsx(w,{children:Z.map(s=>e.jsxs(x,{value:s.id,children:[s.name," - ",s.email]},s.id))})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{htmlFor:"manager",className:"text-sm font-medium",children:"본사 담당자"}),e.jsxs(v,{value:d.manager,onValueChange:s=>S({...d,manager:s}),children:[e.jsx(N,{className:"h-8 text-sm",children:e.jsx(f,{placeholder:"담당자를 선택하세요"})}),e.jsx(w,{children:Z.map(s=>e.jsxs(x,{value:s.id,children:[s.name," - ",s.email]},s.id))})]})]}),e.jsxs("div",{className:"space-y-1 md:col-span-2",children:[e.jsx(c,{htmlFor:"files",className:"text-sm font-medium",children:"첨부파일"}),e.jsxs("div",{className:"border border-dashed border-gray-300 rounded p-3 text-center hover:border-gray-400 transition-colors",children:[e.jsx(He,{className:"mx-auto h-5 w-5 text-gray-400 mb-1"}),e.jsx(b,{type:"file",multiple:!0,className:"hidden",id:"file-upload",onChange:Se,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif"}),e.jsxs(c,{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"파일을 선택하거나 여기에 드래그하세요"}),e.jsx("br",{}),e.jsx("span",{className:"text-xs text-gray-500",children:"PDF, Word, Excel, 이미지 파일 지원"})]})]}),h.length>0&&e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx(c,{className:"text-xs font-medium",children:"업로드된 파일:"}),h.map((s,l)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-100 p-2 rounded text-xs",children:[e.jsx("span",{children:s.name}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>Ve(l),className:"text-red-600 hover:text-red-800 h-6 w-6 p-0",children:e.jsx(H,{className:"w-3 h-3"})})]},l))]})]}),e.jsxs("div",{className:"space-y-1 md:col-span-2",children:[e.jsx(c,{htmlFor:"notes",className:"text-sm font-medium",children:"특이사항"}),e.jsx(Ue,{id:"notes",rows:2,placeholder:"특별한 요청사항이나 주의사항을 입력하세요",className:"resize-none text-sm",value:d.notes,onChange:s=>S({...d,notes:s.target.value})})]})]})})]}),e.jsxs(A,{className:"shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(_,{className:"bg-gray-50 border-b p-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(B,{className:"text-base font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-blue-600"}),"품목 입력"]}),e.jsxs(n,{onClick:ke,variant:"outline",size:"sm",className:"gap-2 h-8 px-3 text-sm bg-transparent",children:[e.jsx(le,{className:"w-3 h-3"}),"품목 추가"]})]})}),e.jsxs(E,{className:"p-3 space-y-3",children:[m.map((s,l)=>e.jsxs("div",{className:"border rounded-lg p-3 bg-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("h4",{className:"text-xs font-medium text-gray-700",children:["품목 #",l+1]}),e.jsxs("div",{className:"flex gap-1 -space-x-1",children:[e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>De(l),className:"h-6 w-6 p-0 text-blue-600 hover:text-blue-800 hover:bg-blue-50",title:"품목 복사",children:e.jsx(Qe,{className:"w-3 h-3"})}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>Fe(l),disabled:m.length===1,className:"h-8 w-8 p-0 text-red-600 hover:text-red-800 hover:bg-red-50 disabled:opacity-50",title:"품목 삭제",children:e.jsx(H,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between border-b pb-1",children:[e.jsxs("h5",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-blue-600"}),"분류 정보"]}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>r(!0),className:"h-6 px-2 text-xs",children:"분류 관리"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(c,{className:"text-xs text-gray-600",children:"대분류"}),e.jsxs(v,{value:s.category,onValueChange:t=>k(l,"category",t),children:[e.jsx(N,{className:"h-8",children:e.jsx(f,{placeholder:"선택"})}),e.jsx(w,{children:Ne.map(t=>e.jsx(x,{value:t.categoryValue,children:t.categoryValue},t.id))})]})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-xs text-gray-600",children:"중분류"}),e.jsxs(v,{value:s.subCategory1,onValueChange:t=>k(l,"subCategory1",t),children:[e.jsx(N,{className:"h-8",children:e.jsx(f,{placeholder:"선택"})}),e.jsx(w,{children:fe.map(t=>e.jsx(x,{value:t.categoryValue,children:t.categoryValue},t.id))})]})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-xs text-gray-600",children:"소분류"}),e.jsxs(v,{value:s.subCategory2,onValueChange:t=>k(l,"subCategory2",t),children:[e.jsx(N,{className:"h-8",children:e.jsx(f,{placeholder:"선택"})}),e.jsx(w,{children:we.map(t=>e.jsx(x,{value:t.categoryValue,children:t.categoryValue},t.id))})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 border-b pb-1",children:"품목 및 수량"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(c,{className:"text-xs text-gray-600",children:"품목명"}),e.jsx(b,{value:s.item,onChange:t=>k(l,"item",t.target.value),className:"h-8",placeholder:"품목명 입력"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(c,{className:"text-xs text-gray-600",children:"수량"}),e.jsx(b,{type:"text",value:re(s.quantity),onChange:t=>k(l,"quantity",t.target.value),className:"h-8",placeholder:"수량"})]}),e.jsxs("div",{className:"w-20",children:[e.jsx(c,{className:"text-xs text-gray-600",children:"단위"}),e.jsxs(v,{value:s.unit,onValueChange:t=>k(l,"unit",t),children:[e.jsx(N,{className:"h-8",children:e.jsx(f,{placeholder:"단위"})}),e.jsxs(w,{children:[e.jsx(x,{value:"ea",children:"ea"}),e.jsx(x,{value:"kg",children:"kg"}),e.jsx(x,{value:"m2",children:"m²"}),e.jsx(x,{value:"m3",children:"m³"}),e.jsx(x,{value:"m",children:"m"}),e.jsx(x,{value:"ton",children:"ton"}),e.jsx(x,{value:"box",children:"box"}),e.jsx(x,{value:"roll",children:"roll"}),e.jsx(x,{value:"bag",children:"bag"}),e.jsx(x,{value:"sheet",children:"sheet"}),e.jsx(x,{value:"set",children:"set"}),e.jsx(x,{value:"L",children:"L"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-xs text-gray-600",children:"단가"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-xs text-gray-500",children:"₩"}),e.jsx(b,{type:"text",value:re(s.unitPrice),onChange:t=>k(l,"unitPrice",t.target.value),className:"h-8 pl-6",placeholder:"단가"})]})]}),e.jsxs("div",{className:"bg-blue-50 p-2 rounded text-center",children:[e.jsx(c,{className:"text-xs text-gray-600",children:"금액"}),e.jsx("div",{className:"text-lg font-semibold text-blue-600",children:xe(s.price)})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 border-b pb-1",children:"거래처 및 납품 정보"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(c,{className:"text-xs text-gray-600",children:"거래처명"}),e.jsxs(v,{value:s.vendor,onValueChange:t=>k(l,"vendor",t),children:[e.jsx(N,{className:"h-8",children:e.jsx(f,{placeholder:"거래처 선택"})}),e.jsx(w,{children:G.map(t=>e.jsx(x,{value:t.name,children:t.name},t.id))})]})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-xs text-gray-600",children:"납품처"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(v,{value:s.deliveryLocation==="현장"?"":s.deliveryLocation,onValueChange:t=>k(l,"deliveryLocation",t),disabled:s.deliveryLocation==="현장",children:[e.jsx(N,{className:"flex-1 h-8",children:e.jsx(f,{placeholder:"납품처 선택"})}),e.jsx(w,{children:G.map(t=>e.jsx(x,{value:t.name,children:t.name},t.id))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(je,{id:`onsite-${l}`,checked:s.deliveryLocation==="현장",onCheckedChange:t=>{k(l,"deliveryLocation",t?"현장":"")},className:"h-4 w-4"}),e.jsx(c,{htmlFor:`onsite-${l}`,className:"text-xs",children:"현장"})]})]})]})]})]})]})]},l)),e.jsx(A,{className:"border-2 border-blue-200 bg-blue-50",children:e.jsxs(E,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-medium text-gray-700",children:"총 주문 금액"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:xe(J)})]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["총 ",m.filter(s=>s.item).length,"개 품목"]})]})})]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 border-t border-gray-200 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",onClick:Pe,className:"gap-2 h-8 px-3 text-sm",children:[e.jsx(We,{className:"w-3 h-3"}),"임시저장"]}),e.jsxs(n,{onClick:ze,className:"gap-2 h-8 px-3 text-sm",variant:"outline",children:[e.jsx(Ze,{className:"w-3 h-3"}),"PDF 미리보기"]}),e.jsxs(n,{onClick:$e,className:"gap-2 h-8 px-3 text-sm",variant:"outline",children:[e.jsx(Ge,{className:"w-3 h-3"}),"이메일 발송"]})]}),e.jsxs("div",{className:"flex gap-2",children:[Q&&P==="draft"&&e.jsxs(n,{onClick:qe,variant:"outline",className:"gap-2 h-8 px-3 text-sm",children:[e.jsx(ie,{className:"w-3 h-3"}),"승인 생략"]}),P==="draft"&&e.jsxs(n,{onClick:Ie,className:"gap-2 h-8 px-3 text-sm bg-blue-600 hover:bg-blue-700",children:[e.jsx(ne,{className:"w-3 h-3"}),"승인 요청"]}),Ae&&e.jsxs(n,{onClick:Ee,className:"gap-2 h-8 px-3 text-sm bg-green-600 hover:bg-green-700",children:[e.jsx(ne,{className:"w-3 h-3"}),"다음 단계"]})]})]})]})}),e.jsx(Oe,{}),se&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"품목 분류 관리"}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>r(!1),className:"h-8 w-8 p-0",children:"×"})]}),e.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]",children:e.jsx(ts,{})})]})})]})}export{us as default};
