# 📌 데이터 스키마 및 기능 개발 전략 제안서

## ✅ 핵심 질문 정리

**Q: 지금 Data Schema부터 전면 재설계할 것인가?**
**A: 아니면 화면 및 기능 단위로 하나씩 구현하며 스키마를 보완할 것인가?**

### 🎯 추천 전략: “기능 기반 점진적 최적화”

* 완전한 DB 스키마 리디자인은 큰 장점이 있으나,
* 현재처럼 기능이 복잡하고 사용자와 협의 중인 화면이 많을 경우,
* **기능 → 스키마 점진 보완 방식**이 더 현실적이고 안정적입니다.

---

## 🗂️ 1단계: 구조 안정화 및 기능 우선 순위 결정

### ✅ A. 우선순위 기능 그룹핑

| 우선순위  | 기능 영역          | 세부 기능                             |
| ----- | -------------- | --------------------------------- |
| 🔴 1차 | 사용자 인증 및 권한    | 로그인 / 사용자별 권한 관리 / 승인 관리          |
| 🟡 2차 | 주요 데이터 관리      | 거래처, 품목, 현장, 사용자 등록 및 관리 기능 업그레이드 |
| 🟢 3차 | 확장 및 통계 기능     | 대시보드 / 통계 분석 / 엑셀 다운로드 등          |
| ⚪ 4차  | 보류/Inactive 화면 | 표준/압출/판넬/부자재 발주서 화면 inactive 전환   |

### ✅ B. UI/UX 유지 전략

* UI는 클로드코드가 약한 영역이므로 화면 흐름을 확정한 뒤,
* **Figma 또는 이미지 기반 설명**을 병행하여 점진적으로 개선할 것.

---

## 🧱 2단계: 기능별 Schema 보완 지침

기능을 하나씩 구현할 때마다 다음 기준으로 스키마 점검하세요:

* **데이터 중복 여부**: 기존 테이블로 처리 가능한가?
* **정규화 정도**: 중첩된 구조가 비정규화 되어 있는가?
* **확장성**: 향후 기능 추가 시 테이블 확장이 쉬운가?

### 🔧 예시:

* 거래처 정보에 담당자, 이메일, 연락처, 주소가 빠져 있다면 → 해당 필드 추가
* 발주서의 승인/이메일 상태 → `status`, `email_status`, `approval_date` 필드 추가

---

## 🚀 3단계: 구현 순서 제안

| 단계 | 구현 항목                  | 설명                                   |
| -- | ---------------------- | ------------------------------------ |
| 1  | 로그인/권한 관리              | Supabase Auth 연동, 관리자/사용자 구분         |
| 2  | 엑셀 발주서 마무리             | 현재 구현 완료 후 QA 및 UI 개선                |
| 3  | 사용자/거래처/현장 관리 UI 업그레이드 | 공통 마스터 데이터 구조 정비                     |
| 4  | 승인/이메일 상태 처리 기능        | 통합된 상태 추적 시스템 도입                     |
| 5  | 대시보드 및 통계              | 분석용 쿼리 작성 → 엑셀/PDF 다운로드 연동           |
| 6  | 배포 및 릴리즈 플로우 설계        | staging → production 분리, 버전 관리 체계 구축 |

---

## 📌 추가 팁: 기능-스키마 연결 문서화

* 각 기능이 어떤 테이블/필드를 요구하는지 문서로 정리해두면,
* 향후 유지보수 및 새로운 개발자 투입 시 매우 유용합니다.

---

## ✅ 결론

* 지금은 **전체 스키마를 처음부터 다시 짜기보다는**,
* **기능 단위로 검증하며 스키마를 정제**해 나가는 것이 안전합니다.

가장 먼저 **사용자 인증 및 권한/승인 기능**부터 안정화시키고,
동시에 클로드코드와 협력하여 **엑셀 발주 기능의 마무리 → 거래처/현장 관리 → 통계 기능**으로 확장해 나가면 자연스럽고 무리 없는 구조 진화가 가능합니다.

-----------------------------
[위 내용에 대한 Claude Code의 의견 정리]

⏺ 개발 전략 제안서에 대한 의견

  매우 현실적이고 실용적인 접근 방식이라고 생각합니다. 특히 다음 부분들이 인상적입니다:

  👍 강점 분석

  1. 점진적 개발 철학

  - 전면 재설계보다는 기능 기반 보완 방식 → 리스크 최소화
  - 현재 동작하는 시스템을 유지하면서 개선하는 안정적 전략

  2. 우선순위 명확화

  - 사용자 인증/권한 → 핵심 데이터 관리 → 확장 기능 순서
  - 비활성화할 기능 구분 (표준/압출/판넬/부자재) → 집중도 향상

  3. 현실적 제약 인식

  - UI/UX는 Claude Code 약점 → Figma 병행 제안
  - 기능-스키마 연결 문서화 → 유지보수성 고려

  🤔 보완 제안

  1. Excel 기능 마무리 우선순위

  현재 Excel 워크플로우가 85% 완성된 상태이므로, Step 0 사전 검증 기능을 우선 구현하여 100% 완성도를 달성하는 것이 좋겠습니다.

  2. 스키마 점검 체크리스트 구체화

  제안하신 기준을 더 구체적으로:
  - 데이터 무결성: Foreign Key 제약 조건 확인
  - 성능: 자주 조회되는 필드 인덱스 검토
  - 확장성: JSON 필드 vs 별도 테이블 trade-off

  3. 단계별 테스트 전략

  각 단계마다 기능 테스트 + 스키마 마이그레이션 테스트를 병행하여 안정성 확보

  🎯 구현 순서 동의

  제안하신 6단계 구현 순서가 매우 합리적입니다. 특히:
  - 1단계 인증/권한 → 모든 기능의 기반
  - 2단계 Excel 마무리 → 현재 가장 완성도 높은 기능
  - 3단계 마스터 데이터 정비 → 전체 시스템 안정화

  이 전략대로 진행하면 안정적이고 지속 가능한 시스템 구축이 가능할 것 같습니다.