import{b as H,c as _,u as Q,x as U,r as W,e as G,m as $,o as f,n as h,t as w,j as e,B as a,F as b,f as n,y as J,E as k,U as y,z as D}from"./index-CT0ftmgw.js";import{T as V,a as X,b as M,c,d as Y,e as d}from"./table-C3AEQCtv.js";import{D as Z,a as ee,b as se,c as re}from"./dialog-Dx9IY5aH.js";import{I as te,R as ae,O as ie}from"./order-preview-simple-CtyT-x7N.js";import{A as S}from"./arrow-left-Bf7Qt02N.js";import{S as oe}from"./square-pen-De9Nm2Rf.js";import{S as le}from"./send-7lvlk8Kv.js";import{D as ne}from"./dollar-sign-D9eoG0SM.js";import{P as j}from"./package-DpMh3BfY.js";import{C as ce}from"./calendar-CMHFh0dj.js";import{C as de}from"./clock-zyLY6hwp.js";import{P as xe}from"./phone-DxX6FuIB.js";import{M as ge}from"./mail-B3ncz6jy.js";import{M as C}from"./map-pin-CpT2MHoK.js";import{A as me}from"./archive-C2G3ZyLF.js";import{D as he}from"./download-wNw4Myop.js";import{P as be}from"./printer-DklvVDFD.js";import{f as g}from"./format-BqlaHE6C.js";import"./index-B0T6xzVV.js";import"./select-i-FUF4r3.js";import"./index-BdQq_4o_.js";import"./index-Ba92UTF-.js";import"./chevron-down-CE-M5reU.js";import"./chevron-up-DjOtQo3T.js";import"./textarea-_3whHVQG.js";import"./upload-DF-_7XK_.js";import"./ko-DHTEdlBI.js";import"./checkbox-BJHnt2OS.js";import"./pen-C9NBTkH-.js";import"./trash-2-CyJH5Th9.js";import"./triangle-alert-9mAzq6ST.js";function We(){const{user:P}=H(),{toast:x}=_(),[,i]=Q(),T=U(),[A,p]=W.useState(!1),{theme:q}=G(),s=q==="dark",o=parseInt(T.id),{data:r,isLoading:E}=$({queryKey:[`/api/orders/${o}`],queryFn:()=>h("GET",`/api/orders/${o}`)});console.log("Order detail - full order data:",r),console.log("Order detail - items:",r?.items);const{data:O}=$({queryKey:["/api/order-statuses"]}),u=f({mutationFn:async()=>{await h("POST",`/api/orders/${o}/approve`)},onSuccess:()=>{x({title:"발주서 승인",description:"발주서가 성공적으로 승인되었습니다."}),w.invalidateQueries({queryKey:["/api/orders"]})},onError:t=>{x({title:"승인 실패",description:t.message,variant:"destructive"})}}),N=f({mutationFn:async()=>{await h("POST",`/api/orders/${o}/send`)},onSuccess:()=>{x({title:"발주서 발송",description:"발주서가 성공적으로 발송되었습니다."}),w.invalidateQueries({queryKey:["/api/orders"]})},onError:t=>{x({title:"발송 실패",description:t.message,variant:"destructive"})}}),v=t=>{const l=O?.find(m=>m.code===t),B=l?l.name:t,R=m=>{switch(m){case"pending_approval":return s?"bg-yellow-900/20 text-yellow-400 border-yellow-700":"bg-yellow-100 text-yellow-800 border-yellow-200";case"approved":return s?"bg-green-900/20 text-green-400 border-green-700":"bg-green-100 text-green-800 border-green-200";case"sent":return s?"bg-blue-900/20 text-blue-400 border-blue-700":"bg-blue-100 text-blue-800 border-blue-200";case"rejected":return s?"bg-red-900/20 text-red-400 border-red-700":"bg-red-100 text-red-800 border-red-200";default:return s?"bg-gray-700 text-gray-300 border-gray-600":"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium border transition-colors ${R(t)}`,children:B})},z=()=>{confirm("이 발주서를 승인하시겠습니까?")&&u.mutate()},I=()=>{confirm("이 발주서를 거래처에 발송하시겠습니까?")&&N.mutate()};if(E)return e.jsx("div",{className:`min-h-screen transition-colors ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-[1366px] mx-auto",children:[e.jsx("div",{className:`border-b transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsx("div",{className:`h-4 rounded w-1/4 transition-colors ${s?"bg-gray-700":"bg-gray-200"}`}),e.jsx("div",{className:`h-8 rounded w-1/2 transition-colors ${s?"bg-gray-700":"bg-gray-200"}`})]})})}),e.jsx("div",{className:"px-6 py-6 space-y-6",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((t,l)=>e.jsx("div",{className:`h-20 rounded transition-colors ${s?"bg-gray-800":"bg-gray-200"}`},l))}),e.jsx("div",{className:`h-32 rounded transition-colors ${s?"bg-gray-800":"bg-gray-200"}`}),e.jsx("div",{className:`h-48 rounded transition-colors ${s?"bg-gray-800":"bg-gray-200"}`})]})})]})});if(!r)return e.jsx("div",{className:`min-h-screen flex items-center justify-center transition-colors ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"max-w-[1366px] mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:`text-xl font-semibold mb-2 transition-colors ${s?"text-white":"text-gray-900"}`,children:"발주서를 찾을 수 없습니다"}),e.jsx("p",{className:`mb-4 transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"요청하신 발주서가 존재하지 않거나 접근 권한이 없습니다."}),e.jsxs(a,{onClick:()=>i("/orders"),className:`shadow-md hover:shadow-lg transition-all duration-200 ${s?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"발주서 목록으로 돌아가기"]})]})})})});const K=P?.role==="admin"&&r.status==="pending_approval",F=r.status==="approved",L=r.status!=="sent"&&r.status!=="received";return e.jsx("div",{className:`min-h-screen transition-colors ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-[1366px] mx-auto",children:[e.jsx("div",{className:`shadow-sm border-b transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>i("/orders"),className:`no-print h-8 px-2 transition-colors ${s?"text-gray-300 hover:text-gray-100 hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,"aria-label":"발주서 목록으로 돌아가기",children:e.jsx(S,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg transition-colors ${s?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(b,{className:`h-5 w-5 transition-colors ${s?"text-blue-400":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-lg font-bold transition-colors ${s?"text-white":"text-gray-900"}`,children:r.orderNumber}),e.jsxs("p",{className:`text-sm transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:[r.vendor?.name," • ",r.orderDate?g(new Date(r.orderDate),"MM.dd"):"날짜 미정"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[v(r.status),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`text-sm transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"총 발주금액"}),e.jsx("p",{className:`text-lg font-bold transition-colors ${s?"text-white":"text-gray-900"}`,children:n(r.totalAmount)})]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 no-print",children:[L&&e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>i(`/orders/${o}/edit`),className:`h-8 px-3 text-xs transition-colors ${s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(oe,{className:"h-4 w-4 mr-1"}),"수정"]}),K&&e.jsxs(a,{size:"sm",onClick:z,disabled:u.isPending,className:`h-8 px-3 text-xs shadow-md hover:shadow-lg transition-all duration-200 ${s?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[e.jsx(J,{className:"h-4 w-4 mr-1"}),"승인"]}),F&&e.jsxs(a,{size:"sm",onClick:I,disabled:N.isPending,className:`h-8 px-3 text-xs shadow-md hover:shadow-lg transition-all duration-200 ${s?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[e.jsx(le,{className:"h-4 w-4 mr-1"}),"발송"]}),e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>p(!0),className:`h-8 px-3 text-xs transition-colors ${s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),"미리보기"]})]})]})}),e.jsxs("div",{className:"px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-4 space-y-2",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"진행 상태"}),e.jsx("div",{className:"mt-1",children:v(r.status)})]})})})}),e.jsx("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-4 space-y-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-sm block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"발주 금액"}),e.jsx("span",{className:`text-lg font-bold transition-colors ${s?"text-blue-400":"text-blue-600"}`,children:n(r.totalAmount)})]}),e.jsx(ne,{className:`h-5 w-5 transition-colors ${s?"text-gray-500":"text-gray-400"}`})]})})}),e.jsx("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-4 space-y-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-sm block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"품목 수"}),e.jsxs("span",{className:`text-lg font-bold transition-colors ${s?"text-white":"text-gray-900"}`,children:[r.items?.length||0,"개"]})]}),e.jsx(j,{className:`h-5 w-5 transition-colors ${s?"text-gray-500":"text-gray-400"}`})]})})}),e.jsx("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-4 space-y-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-sm block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"납기일"}),e.jsx("span",{className:`text-lg font-bold transition-colors ${s?"text-white":"text-gray-900"}`,children:r.deliveryDate?g(new Date(r.deliveryDate),"MM.dd"):"미정"})]}),e.jsx(ce,{className:`h-5 w-5 transition-colors ${s?"text-gray-500":"text-gray-400"}`})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-6 border-b transition-colors ${s?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${s?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(b,{className:`h-5 w-5 transition-colors ${s?"text-blue-400":"text-blue-600"}`})}),e.jsx("h3",{className:`text-lg font-semibold transition-colors ${s?"text-white":"text-gray-900"}`,children:"발주서 정보"})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"발주번호"}),e.jsx("span",{className:`font-semibold transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.orderNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"발주일"}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.orderDate?g(new Date(r.orderDate),"yyyy.MM.dd"):"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"담당자"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{className:`h-4 w-4 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.user?.firstName&&r.user?.lastName?`${r.user.lastName}${r.user.firstName}`:r.user?.email||"알 수 없음"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"납기일"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(de,{className:`h-4 w-4 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.deliveryDate?g(new Date(r.deliveryDate),"yyyy.MM.dd"):"-"})]})]})]}),r.notes&&e.jsxs("div",{className:`pt-4 border-t transition-colors ${s?"border-gray-700":"border-gray-100"}`,children:[e.jsx("span",{className:`text-sm block mb-2 transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"비고"}),e.jsx("div",{className:`text-sm p-3 rounded transition-colors ${s?"bg-gray-700 text-gray-200":"bg-gray-50 text-gray-700"}`,children:r.notes})]})]})]}),r.vendor&&e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-6 border-b transition-colors ${s?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${s?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(D,{className:`h-5 w-5 transition-colors ${s?"text-blue-400":"text-blue-600"}`})}),e.jsx("h3",{className:`text-lg font-semibold transition-colors ${s?"text-white":"text-gray-900"}`,children:"거래처 정보"})]})}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"업체명"}),e.jsx("button",{className:`text-sm font-medium cursor-pointer focus:outline-none focus:ring-1 rounded transition-all text-left ${s?"text-blue-400 hover:text-blue-300 focus:ring-blue-400":"text-blue-600 hover:text-blue-700 focus:ring-blue-500"}`,onClick:()=>r.vendor?.id&&i(`/vendors/${r.vendor.id}`),title:"거래처 상세보기","aria-label":`거래처 ${r.vendor.name} 상세보기`,tabIndex:0,onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),r.vendor?.id&&i(`/vendors/${r.vendor.id}`))},children:r.vendor.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"담당자"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{className:`h-3 w-3 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.vendor.contact||"-"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"전화번호"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xe,{className:`h-3 w-3 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.vendor.phone||"-"})]})]})]}),r.vendor.email&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"이메일"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ge,{className:`h-3 w-3 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-xs transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.vendor.email})]})]}),r.vendor.address&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"주소"}),e.jsxs("div",{className:"flex items-start gap-1",children:[e.jsx(C,{className:`h-3 w-3 mt-0.5 flex-shrink-0 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-xs transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.vendor.address})]})]})]})})]}),r.project&&e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-6 border-b transition-colors ${s?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${s?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(D,{className:`h-5 w-5 transition-colors ${s?"text-blue-400":"text-blue-600"}`})}),e.jsx("h3",{className:`text-lg font-semibold transition-colors ${s?"text-white":"text-gray-900"}`,children:"현장 정보"})]})}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"현장명"}),e.jsx("button",{className:`text-sm font-medium cursor-pointer focus:outline-none focus:ring-1 rounded transition-all text-left ${s?"text-blue-400 hover:text-blue-300 focus:ring-blue-400":"text-blue-600 hover:text-blue-700 focus:ring-blue-500"}`,onClick:()=>i(`/projects/${r.project.id}`),title:"현장 상세보기","aria-label":`현장 ${r.project.projectName} 상세보기`,tabIndex:0,onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),i(`/projects/${r.project.id}`))},children:r.project.projectName}),e.jsxs("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:["(",r.project.projectCode,")"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"담당자"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{className:`h-3 w-3 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.project.projectManager||"-"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"위치"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(C,{className:`h-3 w-3 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.project.location||"-"})]})]})]}),r.project.description&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block mb-1 transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"설명"}),e.jsx("div",{className:`text-xs p-2 rounded transition-colors ${s?"bg-gray-700 text-gray-200":"bg-gray-50 text-gray-700"}`,children:r.project.description})]})]})})]})]}),e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-6 border-b transition-colors ${s?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${s?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(j,{className:`h-5 w-5 transition-colors ${s?"text-blue-400":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold transition-colors ${s?"text-white":"text-gray-900"}`,children:"발주 품목"}),e.jsxs("span",{className:`text-sm transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:["총 ",r.items?.length||0,"개 품목"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"총 발주금액"}),e.jsx("span",{className:`text-sm font-semibold transition-colors ${s?"text-blue-400":"text-blue-600"}`,children:n(r.totalAmount)})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(V,{children:[e.jsx(X,{children:e.jsxs(M,{className:`border-b transition-colors ${s?"border-gray-600":"border-blue-100"}`,children:[e.jsx(c,{className:`text-xs py-2 px-2 font-medium transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"품목명"}),e.jsx(c,{className:`text-xs py-2 px-2 font-medium transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"규격"}),e.jsx(c,{className:`text-xs text-center py-2 px-2 font-medium transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"수량"}),e.jsx(c,{className:`text-xs text-right py-2 px-2 font-medium transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"단가"}),e.jsx(c,{className:`text-xs text-right py-2 px-2 font-medium transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"금액"}),e.jsx(c,{className:`text-xs py-2 px-2 font-medium transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"비고"})]})}),e.jsx(Y,{children:r.items?.map((t,l)=>e.jsxs(M,{className:`border-b transition-colors ${s?"border-gray-600 hover:bg-gray-700/30":"border-blue-100 hover:bg-blue-50/30"}`,children:[e.jsx(d,{className:"py-2 px-2",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{className:`h-3 w-3 flex-shrink-0 transition-colors ${s?"text-gray-500":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("span",{className:`font-medium text-xs block transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:t.itemName}),t.specification&&e.jsx("span",{className:`text-xs transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:t.specification})]})]})}),e.jsx(d,{className:`py-2 px-2 text-xs transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:t.specification||"-"}),e.jsx(d,{className:"text-center py-2 px-2",children:e.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium transition-colors ${s?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-800"}`,children:typeof t.quantity=="number"?t.quantity.toLocaleString():t.quantity||"-"})}),e.jsx(d,{className:`text-right py-2 px-2 font-medium text-xs transition-colors ${s?"text-blue-400":"text-blue-600"}`,children:n(t.unitPrice)}),e.jsx(d,{className:"text-right py-2 px-2",children:e.jsx("span",{className:`font-semibold text-xs transition-colors ${s?"text-blue-400":"text-blue-600"}`,children:n(t.totalAmount)})}),e.jsx(d,{className:`py-2 px-2 text-xs transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:t.notes||"-"})]},l))})]})}),e.jsx("div",{className:`mt-4 pt-4 border-t transition-colors ${s?"border-gray-700":"border-gray-200"}`,children:e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:`rounded p-3 min-w-[160px] transition-colors ${s?"bg-gray-700":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xs font-medium transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"총 발주금액"}),e.jsx("span",{className:`text-sm font-semibold transition-colors ${s?"text-blue-400":"text-blue-600"}`,children:n(r.totalAmount)})]})})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(te,{orderId:o})}),r.items&&r.items.length>0&&e.jsx("div",{children:e.jsx(ae,{orderItems:r.items,orderId:o})})]}),r.attachments&&r.attachments.length>0&&e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-6 border-b transition-colors ${s?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${s?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(me,{className:`h-5 w-5 transition-colors ${s?"text-blue-400":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold transition-colors ${s?"text-white":"text-gray-900"}`,children:"첨부파일"}),e.jsxs("span",{className:`text-sm transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:["총 ",r.attachments.length,"개 파일"]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.attachments.map(t=>e.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg transition-all ${s?"border-gray-600 hover:border-gray-500 hover:bg-gray-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e.jsx(b,{className:`h-4 w-4 transition-colors ${s?"text-gray-500":"text-gray-400"}`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:`text-xs font-medium truncate block transition-colors ${s?"text-gray-200":"text-gray-900"}`,title:t.filename,children:t.filename}),e.jsx("span",{className:`text-xs transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"첨부파일"})]})]}),e.jsxs(a,{variant:"outline",size:"sm",className:`ml-2 flex-shrink-0 h-7 px-2 text-xs transition-colors ${s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(he,{className:"h-3 w-3 mr-1"}),"다운로드"]})]},t.id))})})]}),e.jsx(Z,{open:A,onOpenChange:p,children:e.jsxs(ee,{className:`max-w-[1366px] max-h-[90vh] overflow-y-auto transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx(se,{children:e.jsxs(re,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:`h-4 w-4 transition-colors ${s?"text-gray-400":"text-gray-600"}`}),e.jsxs("div",{children:[e.jsx("span",{className:`text-sm font-semibold transition-colors ${s?"text-white":"text-gray-900"}`,children:"발주서 미리보기"}),e.jsx("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:r?.orderNumber})]})]}),e.jsx("div",{className:"flex space-x-1",children:e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>{const t=window.open("","_blank");t&&(t.document.write(`
                          <html>
                            <head>
                              <title>발주서 - ${r?.orderNumber}</title>
                              <style>
                                body { margin: 0; font-family: Arial, sans-serif; }
                                @media print {
                                  body { margin: 0; }
                                  .no-print { display: none !important; }
                                }
                              </style>
                            </head>
                            <body>
                              ${document.querySelector(".order-preview-content")?.innerHTML||""}
                            </body>
                          </html>
                        `),t.document.close(),t.print())},className:`h-8 px-2 text-xs transition-colors ${s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(be,{className:"h-4 w-4 mr-1"}),"PDF 출력"]})})]})}),e.jsx("div",{className:"order-preview-content mt-2",children:r&&e.jsx(ie,{order:r})})]})})]})]})})}export{We as default};
