import{j as e}from"./chunk-D67rGsji.js";import{r as a}from"./chunk-BgLp_VvL.js";import{b as k}from"./chunk-DV-F1ehd.js";import{k as B,l as C}from"./index-B9Zn91qv.js";import{S as V}from"./chunk-Bw5QEQRA.js";import"./chunk-CZez8RVl.js";import"./chunk-CFxRDIMf.js";import"./chunk-CVirgo2y.js";import"./chunk-bdHBeqB0.js";function Y({items:t,renderItem:h,itemHeight:r,containerHeight:d,overscan:o=5,className:i,onScroll:g,onReachEnd:j,scrollEndThreshold:y=100,enableSmoothScrolling:w=!0,loadingItemsCount:c=3,isLoading:x=!1,emptyMessage:m="항목이 없습니다",EmptyComponent:p,LoadingComponent:u}){const[v,A]=a.useState(0),[_,H]=a.useState(!1),z=a.useRef(null),b=a.useRef();B("VirtualScrollList");const{height:E}=C(),S=d||Math.min(E*.6,500),I=a.useCallback(l=>typeof r=="function"?r(l):r,[r]),{startIndex:M,endIndex:N,totalHeight:$,offsetY:G}=a.useMemo(()=>{if(t.length===0)return{startIndex:0,endIndex:0,totalHeight:0,offsetY:0};let l=0,s=0,f=0,T=0;for(let n=0;n<t.length;n++){const R=I(n);if(l+R>v){s=Math.max(0,n-o),T=l-(n-s)*(typeof r=="number"?r:50);break}l+=R}l=0;for(let n=s;n<t.length;n++)if(l+=I(n),l>S+v){f=Math.min(t.length,n+o);break}f===0&&(f=t.length);let L=0;for(let n=0;n<t.length;n++)L+=I(n);return{startIndex:s,endIndex:f,totalHeight:L,offsetY:T}},[t.length,v,S,o,I]),X=a.useMemo(()=>t.slice(M,N).map((l,s)=>({item:l,index:M+s,globalIndex:M+s})),[t,M,N]),q=a.useCallback(l=>{const s=l.currentTarget.scrollTop;A(s),H(!0),g?.(s);const{scrollHeight:f,clientHeight:T}=l.currentTarget;f-s-T<y&&j?.(),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{H(!1)},150)},[g,j,y]);return a.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),x&&t.length===0?u?e.jsx(u,{count:c}):e.jsx("div",{className:k("space-y-2 p-4",i),style:{height:S},children:Array.from({length:c}).map((l,s)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{className:"h-4 w-3/4"}),e.jsx(V,{className:"h-4 w-1/2"})]},s))}):t.length===0?p?e.jsx(p,{}):e.jsx("div",{className:k("flex items-center justify-center text-gray-500 bg-gray-50",i),style:{height:S},children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm",children:m})})}):e.jsx("div",{ref:z,className:k("overflow-auto",w&&"scroll-smooth",i),style:{height:S},onScroll:q,children:e.jsx("div",{style:{height:$,position:"relative"},children:e.jsxs("div",{style:{transform:`translateY(${G}px)`,position:"absolute",top:0,left:0,right:0},children:[X.map(({item:l,index:s,globalIndex:f})=>e.jsx("div",{style:{height:I(f)},className:"flex flex-col justify-center",children:h(l,f,!_)},f)),x&&t.length>0&&e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"로딩 중..."})]})]})})})}function W({hasNextPage:t,isFetchingNextPage:h,fetchNextPage:r,...d}){const o=a.useCallback(()=>{t&&!h&&r&&r()},[t,h,r]);return e.jsx(Y,{...d,onReachEnd:o,isLoading:h})}function ee({items:t,renderItem:h,columnCount:r,itemHeight:d,itemWidth:o,gap:i=16,containerHeight:g=400,className:j}){const y=Math.ceil(t.length/r),w=d+i;return e.jsx(Y,{items:Array.from({length:y},(c,x)=>x),itemHeight:w,containerHeight:g,className:j,renderItem:c=>e.jsx("div",{className:"flex gap-4",style:{gap:i},children:Array.from({length:r},(x,m)=>{const p=c*r+m,u=t[p];return u?e.jsx("div",{style:{width:o,flex:o?"none":"1"},children:h(u,p)},m):e.jsx("div",{style:{width:o,flex:o?"none":"1"}},m)})})})}function te({items:t,renderItem:h,itemWidth:r,containerWidth:d=800,containerHeight:o=200,gap:i=12,className:g}){const[j,y]=a.useState(0),w=Math.ceil(d/(r+i))+2,c=Math.max(0,Math.floor(j/(r+i))-1),x=Math.min(t.length,c+w),m=t.length*(r+i),p=t.slice(c,x);return e.jsx("div",{className:k("overflow-x-auto overflow-y-hidden",g),style:{width:d,height:o},onScroll:u=>y(u.currentTarget.scrollLeft),children:e.jsx("div",{style:{width:m,height:"100%",position:"relative"},children:e.jsx("div",{style:{transform:`translateX(${c*(r+i)}px)`,position:"absolute",height:"100%",display:"flex",gap:i},children:p.map((u,v)=>e.jsx("div",{style:{width:r,flexShrink:0},children:h(u,c+v)},c+v))})})})}export{te as HorizontalVirtualList,W as InfiniteVirtualList,ee as VirtualGrid,Y as VirtualScrollList};
