/**
 * Accessibility Styles
 * WCAG 2.1 AA compliant styles for enhanced accessibility
 */

/* Screen reader only content */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.sr-only:focus {
  position: static;
  width: auto;
  height: auto;
  padding: 0.5rem 1rem;
  margin: 0;
  overflow: visible;
  clip: auto;
  white-space: normal;
  z-index: 9999;
  background: #1f2937;
  color: white;
  border-radius: 0.375rem;
}

/* High contrast mode */
.high-contrast {
  --contrast-text-primary: #000000;
  --contrast-text-secondary: #333333;
  --contrast-text-inverse: #ffffff;
  --contrast-bg-primary: #ffffff;
  --contrast-bg-secondary: #f5f5f5;
  --contrast-bg-accent: #0066cc;
  --contrast-border-default: #666666;
  --contrast-border-focus: #0066cc;
}

.high-contrast.contrast-high {
  --contrast-text-primary: #000000;
  --contrast-text-secondary: #222222;
  --contrast-bg-secondary: #e5e5e5;
  --contrast-bg-accent: #004499;
  --contrast-border-default: #333333;
  --contrast-border-focus: #004499;
}

.high-contrast.contrast-maximum {
  --contrast-text-primary: #000000;
  --contrast-text-secondary: #000000;
  --contrast-bg-primary: #ffffff;
  --contrast-bg-secondary: #ffffff;
  --contrast-bg-accent: #000000;
  --contrast-border-default: #000000;
  --contrast-border-focus: #000000;
}

/* Text size utilities */
.text-size-small {
  font-size: 14px;
}

.text-size-normal {
  font-size: 16px;
}

.text-size-large {
  font-size: 18px;
}

.text-size-extra-large {
  font-size: 24px;
}

/* Reduced motion preferences */
.reduce-motion,
.reduce-motion *,
.reduce-motion *::before,
.reduce-motion *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

/* Focus management */
.focus-visible:focus {
  outline: none;
  box-shadow: 0 0 0 2px #fff, 0 0 0 4px #3b82f6;
}

.high-contrast .focus-visible:focus {
  box-shadow: 0 0 0 2px #fff, 0 0 0 4px var(--contrast-border-focus);
}

/* High contrast component styles */
.high-contrast .contrast-text-primary {
  color: var(--contrast-text-primary) !important;
}

.high-contrast .contrast-text-secondary {
  color: var(--contrast-text-secondary) !important;
}

.high-contrast .contrast-text-inverse {
  color: var(--contrast-text-inverse) !important;
}

.high-contrast .contrast-bg-primary {
  background-color: var(--contrast-bg-primary) !important;
}

.high-contrast .contrast-bg-secondary {
  background-color: var(--contrast-bg-secondary) !important;
}

.high-contrast .contrast-bg-accent {
  background-color: var(--contrast-bg-accent) !important;
  color: var(--contrast-text-inverse) !important;
}

.high-contrast .contrast-border-default {
  border-color: var(--contrast-border-default) !important;
}

.high-contrast .contrast-border-focus:focus {
  border-color: var(--contrast-border-focus) !important;
}

/* Button contrast adjustments */
.high-contrast button {
  border: 2px solid var(--contrast-border-default);
}

.high-contrast button:focus {
  border-color: var(--contrast-border-focus);
  outline: 2px solid var(--contrast-border-focus);
  outline-offset: 2px;
}

.high-contrast button:hover {
  opacity: 0.8;
}

/* Form input contrast adjustments */
.high-contrast input,
.high-contrast select,
.high-contrast textarea {
  border: 2px solid var(--contrast-border-default) !important;
  background-color: var(--contrast-bg-primary) !important;
  color: var(--contrast-text-primary) !important;
}

.high-contrast input:focus,
.high-contrast select:focus,
.high-contrast textarea:focus {
  border-color: var(--contrast-border-focus) !important;
  outline: 2px solid var(--contrast-border-focus) !important;
  outline-offset: 0 !important;
}

/* Link contrast adjustments */
.high-contrast a {
  color: var(--contrast-bg-accent) !important;
  text-decoration: underline !important;
}

.high-contrast a:visited {
  color: #663399 !important;
}

.high-contrast a:hover,
.high-contrast a:focus {
  color: var(--contrast-text-primary) !important;
  background-color: var(--contrast-bg-accent) !important;
  outline: 2px solid var(--contrast-border-focus) !important;
}

/* Card and container contrast adjustments */
.high-contrast .card,
.high-contrast .border {
  border: 2px solid var(--contrast-border-default) !important;
  background-color: var(--contrast-bg-primary) !important;
}

/* Shadow adjustments for high contrast */
.high-contrast .shadow,
.high-contrast .shadow-sm,
.high-contrast .shadow-md,
.high-contrast .shadow-lg,
.high-contrast .shadow-xl {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5) !important;
}

.high-contrast.contrast-maximum .shadow,
.high-contrast.contrast-maximum .shadow-sm,
.high-contrast.contrast-maximum .shadow-md,
.high-contrast.contrast-maximum .shadow-lg,
.high-contrast.contrast-maximum .shadow-xl {
  box-shadow: 0 0 0 3px var(--contrast-border-default) !important;
}

/* Status color adjustments for high contrast */
.high-contrast .text-green-600,
.high-contrast .text-green-700,
.high-contrast .text-green-800 {
  color: #006600 !important;
}

.high-contrast .text-red-600,
.high-contrast .text-red-700,
.high-contrast .text-red-800 {
  color: #cc0000 !important;
}

.high-contrast .text-yellow-600,
.high-contrast .text-yellow-700,
.high-contrast .text-yellow-800 {
  color: #cc6600 !important;
}

.high-contrast .text-blue-600,
.high-contrast .text-blue-700,
.high-contrast .text-blue-800 {
  color: var(--contrast-bg-accent) !important;
}

/* Background color adjustments */
.high-contrast .bg-green-50,
.high-contrast .bg-green-100 {
  background-color: #e6ffe6 !important;
  border-color: #006600 !important;
}

.high-contrast .bg-red-50,
.high-contrast .bg-red-100 {
  background-color: #ffe6e6 !important;
  border-color: #cc0000 !important;
}

.high-contrast .bg-yellow-50,
.high-contrast .bg-yellow-100 {
  background-color: #fff3e6 !important;
  border-color: #cc6600 !important;
}

.high-contrast .bg-blue-50,
.high-contrast .bg-blue-100 {
  background-color: #e6f3ff !important;
  border-color: var(--contrast-bg-accent) !important;
}

/* Maximum contrast mode adjustments */
.high-contrast.contrast-maximum * {
  color: var(--contrast-text-primary) !important;
  background-color: var(--contrast-bg-primary) !important;
}

.high-contrast.contrast-maximum button,
.high-contrast.contrast-maximum .bg-primary-600,
.high-contrast.contrast-maximum .bg-blue-600 {
  background-color: var(--contrast-bg-accent) !important;
  color: var(--contrast-text-inverse) !important;
  border: 3px solid var(--contrast-border-default) !important;
}

/* Safe area support for mobile devices */
.safe-area-pb {
  padding-bottom: env(safe-area-inset-bottom);
}

.safe-area-pt {
  padding-top: env(safe-area-inset-top);
}

.safe-area-pl {
  padding-left: env(safe-area-inset-left);
}

.safe-area-pr {
  padding-right: env(safe-area-inset-right);
}

/* Touch target minimum size (44px for iOS/Android) */
.touch-target {
  min-height: 44px;
  min-width: 44px;
}

/* Improve tap targets for mobile */
@media (max-width: 768px) {
  button,
  .button,
  [role="button"],
  input[type="button"],
  input[type="submit"],
  a {
    min-height: 44px;
    min-width: 44px;
    padding: 12px 16px;
  }
}

/* Ensure sufficient color contrast for placeholders */
.high-contrast input::placeholder,
.high-contrast textarea::placeholder {
  color: #666666 !important;
  opacity: 1 !important;
}

.high-contrast.contrast-maximum input::placeholder,
.high-contrast.contrast-maximum textarea::placeholder {
  color: #000000 !important;
  opacity: 0.7 !important;
}

/* Skip link styling */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: #000;
  color: #fff;
  padding: 8px;
  text-decoration: none;
  border-radius: 0 0 4px 4px;
  z-index: 9999;
}

.skip-link:focus {
  top: 0;
}

/* Keyboard navigation indicators */
.keyboard-focused {
  outline: 3px solid #4c9aff !important;
  outline-offset: 2px !important;
}

.high-contrast .keyboard-focused {
  outline: 3px solid var(--contrast-border-focus) !important;
}

/* Error state improvements */
.error-state {
  border-color: #dc2626 !important;
  box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1) !important;
}

.high-contrast .error-state {
  border-color: #cc0000 !important;
  box-shadow: 0 0 0 3px rgba(204, 0, 0, 0.2) !important;
}

/* Success state improvements */
.success-state {
  border-color: #16a34a !important;
  box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.1) !important;
}

.high-contrast .success-state {
  border-color: #006600 !important;
  box-shadow: 0 0 0 3px rgba(0, 102, 0, 0.2) !important;
}

/* Loading state accessibility */
.loading-spinner {
  animation: spin 1s linear infinite;
}

.reduce-motion .loading-spinner {
  animation: none;
  opacity: 0.6;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* Print styles for accessibility */
@media print {
  .sr-only {
    position: static !important;
    width: auto !important;
    height: auto !important;
    margin: 0 !important;
    overflow: visible !important;
    clip: auto !important;
    white-space: normal !important;
  }
  
  * {
    background: white !important;
    color: black !important;
  }
  
  a::after {
    content: " (" attr(href) ")";
  }
}