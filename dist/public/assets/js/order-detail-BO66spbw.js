import{b as Q,c as R,u as _,H as G,r as U,e as W,J as f,A as w,D as y,G as g,j as e,B as l,F as b,f as d,M as J,E as k,U as p,p as D}from"./index-C1FD_2aC.js";import{T as V,a as X,b as C,c as i,d as Y,e as o}from"./table-B54yLTn9.js";import{D as Z,a as ee,b as se,c as re}from"./dialog-DsxQI6pV.js";import{I as te,R as ae,O as ie}from"./order-preview-simple-D7AKnyPh.js";import{A as M}from"./arrow-left-8Rvx4xN8.js";import{S as oe}from"./square-pen-CBQurWGn.js";import{S as le}from"./send-D3_ajtgY.js";import{D as ne}from"./dollar-sign-irZG6fXe.js";import{P as j}from"./package-CSupDGsB.js";import{C as ce}from"./calendar-C8ZNBhUJ.js";import{C as de}from"./clock-VrNskZcj.js";import{P as xe}from"./phone-BYcB0y6c.js";import{M as ge}from"./mail-CuC4OgwV.js";import{M as S}from"./map-pin-mX09l1NI.js";import{A as me}from"./archive-BBoEyGXn.js";import{D as he}from"./download-DJ1klqUf.js";import{P as ye}from"./printer-Dg1-BlVS.js";import{f as m}from"./format-BqlaHE6C.js";import"./index-Uj3QWJcR.js";import"./select-B3Iid4z8.js";import"./index-BdQq_4o_.js";import"./index-CuBmkLNp.js";import"./chevron-down-BWwjS3gT.js";import"./chevron-up-BvTUxraI.js";import"./textarea-BmEGHmdZ.js";import"./upload-JfMkJGcP.js";import"./ko-DHTEdlBI.js";import"./checkbox-I_b6pm_u.js";import"./pen-D7D1IBEf.js";import"./trash-2-DlIgWmfO.js";import"./triangle-alert-DSNUvu5X.js";function Ue(){const{user:P}=Q(),{toast:x}=R(),[,n]=_(),A=G(),[T,u]=U.useState(!1),{theme:q}=W(),s=q==="dark",a=parseInt(A.id),{data:r,isLoading:E}=f({queryKey:[`/api/orders/${a}`],queryFn:()=>y("GET",`/api/orders/${a}`)});console.log("Order detail - full order data:",r),console.log("Order detail - items:",r?.items);const{data:K}=f({queryKey:["/api/order-statuses"]}),N=w({mutationFn:async()=>{await y("POST",`/api/orders/${a}/approve`)},onSuccess:()=>{x({title:"발주서 승인",description:"발주서가 성공적으로 승인되었습니다."}),g.invalidateQueries({queryKey:["/api/orders"]}),g.invalidateQueries({queryKey:[`/api/orders/${a}`]})},onError:t=>{x({title:"승인 실패",description:t.message,variant:"destructive"})}}),v=w({mutationFn:async()=>{await y("POST",`/api/orders/${a}/send`)},onSuccess:()=>{x({title:"발주서 발송",description:"발주서가 성공적으로 발송되었습니다."}),g.invalidateQueries({queryKey:["/api/orders"]}),g.invalidateQueries({queryKey:[`/api/orders/${a}`]})},onError:t=>{x({title:"발송 실패",description:t.message,variant:"destructive"})}}),$=t=>{const c=K?.find(h=>h.code===t),B=c?c.name:t,H=h=>{switch(h){case"pending_approval":return s?"bg-yellow-900/20 text-yellow-400 border-yellow-700":"bg-yellow-100 text-yellow-800 border-yellow-200";case"approved":return s?"bg-green-900/20 text-green-400 border-green-700":"bg-green-100 text-green-800 border-green-200";case"sent":return s?"bg-blue-900/20 text-blue-400 border-blue-700":"bg-blue-100 text-blue-800 border-blue-200";case"rejected":return s?"bg-red-900/20 text-red-400 border-red-700":"bg-red-100 text-red-800 border-red-200";default:return s?"bg-gray-700 text-gray-300 border-gray-600":"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium border transition-colors ${H(t)}`,children:B})},O=()=>{confirm("이 발주서를 승인하시겠습니까?")&&N.mutate()},z=()=>{confirm("이 발주서를 거래처에 발송하시겠습니까?")&&v.mutate()};if(E)return e.jsx("div",{className:`min-h-screen transition-colors ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-[1366px] mx-auto",children:[e.jsx("div",{className:`border-b transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsx("div",{className:`h-4 rounded w-1/4 transition-colors ${s?"bg-gray-700":"bg-gray-200"}`}),e.jsx("div",{className:`h-8 rounded w-1/2 transition-colors ${s?"bg-gray-700":"bg-gray-200"}`})]})})}),e.jsx("div",{className:"px-6 py-6 space-y-6",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((t,c)=>e.jsx("div",{className:`h-20 rounded transition-colors ${s?"bg-gray-800":"bg-gray-200"}`},c))}),e.jsx("div",{className:`h-32 rounded transition-colors ${s?"bg-gray-800":"bg-gray-200"}`}),e.jsx("div",{className:`h-48 rounded transition-colors ${s?"bg-gray-800":"bg-gray-200"}`})]})})]})});if(!r)return e.jsx("div",{className:`min-h-screen flex items-center justify-center transition-colors ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"max-w-[1366px] mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:`text-xl font-semibold mb-2 transition-colors ${s?"text-white":"text-gray-900"}`,children:"발주서를 찾을 수 없습니다"}),e.jsx("p",{className:`mb-4 transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"요청하신 발주서가 존재하지 않거나 접근 권한이 없습니다."}),e.jsxs(l,{onClick:()=>n("/orders"),className:`shadow-md hover:shadow-lg transition-all duration-200 ${s?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"발주서 목록으로 돌아가기"]})]})})})});const I=P?.role==="admin"&&r.status==="pending_approval",F=r.status==="approved",L=r.status!=="sent"&&r.status!=="received";return e.jsx("div",{className:`min-h-screen transition-colors ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-[1366px] mx-auto",children:[e.jsx("div",{className:`shadow-sm border-b transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>n("/orders"),className:`no-print h-8 px-2 transition-colors ${s?"text-gray-300 hover:text-gray-100 hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,"aria-label":"발주서 목록으로 돌아가기",children:e.jsx(M,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg transition-colors ${s?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(b,{className:`h-5 w-5 transition-colors ${s?"text-blue-400":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-lg font-bold transition-colors ${s?"text-white":"text-gray-900"}`,children:r.orderNumber}),e.jsxs("p",{className:`text-sm transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:[r.vendor?.name," • ",r.orderDate?m(new Date(r.orderDate),"MM.dd"):"날짜 미정"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[$(r.status),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`text-sm transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"총 발주금액"}),e.jsx("p",{className:`text-lg font-bold transition-colors ${s?"text-white":"text-gray-900"}`,children:d(r.totalAmount)})]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 no-print",children:[L&&e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>n(`/orders/${a}/edit`),className:`h-8 px-3 text-xs transition-colors ${s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(oe,{className:"h-4 w-4 mr-1"}),"수정"]}),I&&e.jsxs(l,{size:"sm",onClick:O,disabled:N.isPending,className:`h-8 px-3 text-xs shadow-md hover:shadow-lg transition-all duration-200 ${s?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[e.jsx(J,{className:"h-4 w-4 mr-1"}),"승인"]}),F&&e.jsxs(l,{size:"sm",onClick:z,disabled:v.isPending,className:`h-8 px-3 text-xs shadow-md hover:shadow-lg transition-all duration-200 ${s?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[e.jsx(le,{className:"h-4 w-4 mr-1"}),"발송"]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>u(!0),className:`h-8 px-3 text-xs transition-colors ${s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),"미리보기"]})]})]})}),e.jsxs("div",{className:"px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-4 space-y-2",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"진행 상태"}),e.jsx("div",{className:"mt-1",children:$(r.status)})]})})})}),e.jsx("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-4 space-y-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-sm block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"발주 금액"}),e.jsx("span",{className:`text-lg font-bold transition-colors ${s?"text-blue-400":"text-blue-600"}`,children:d(r.totalAmount)})]}),e.jsx(ne,{className:`h-5 w-5 transition-colors ${s?"text-gray-500":"text-gray-400"}`})]})})}),e.jsx("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-4 space-y-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-sm block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"품목 수"}),e.jsxs("span",{className:`text-lg font-bold transition-colors ${s?"text-white":"text-gray-900"}`,children:[r.items?.length||0,"개"]})]}),e.jsx(j,{className:`h-5 w-5 transition-colors ${s?"text-gray-500":"text-gray-400"}`})]})})}),e.jsx("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-4 space-y-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-sm block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"납기일"}),e.jsx("span",{className:`text-lg font-bold transition-colors ${s?"text-white":"text-gray-900"}`,children:r.deliveryDate?m(new Date(r.deliveryDate),"MM.dd"):"미정"})]}),e.jsx(ce,{className:`h-5 w-5 transition-colors ${s?"text-gray-500":"text-gray-400"}`})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-6 border-b transition-colors ${s?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${s?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(b,{className:`h-5 w-5 transition-colors ${s?"text-blue-400":"text-blue-600"}`})}),e.jsx("h3",{className:`text-lg font-semibold transition-colors ${s?"text-white":"text-gray-900"}`,children:"발주서 정보"})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"발주번호"}),e.jsx("span",{className:`font-semibold transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.orderNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"발주일"}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.orderDate?m(new Date(r.orderDate),"yyyy.MM.dd"):"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"담당자"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(p,{className:`h-4 w-4 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.user?.firstName&&r.user?.lastName?`${r.user.lastName}${r.user.firstName}`:r.user?.email||"알 수 없음"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"납기일"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(de,{className:`h-4 w-4 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.deliveryDate?m(new Date(r.deliveryDate),"yyyy.MM.dd"):"-"})]})]})]}),r.notes&&e.jsxs("div",{className:`pt-4 border-t transition-colors ${s?"border-gray-700":"border-gray-100"}`,children:[e.jsx("span",{className:`text-sm block mb-2 transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"비고"}),e.jsx("div",{className:`text-sm p-3 rounded transition-colors ${s?"bg-gray-700 text-gray-200":"bg-gray-50 text-gray-700"}`,children:r.notes})]})]})]}),r.vendor&&e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-6 border-b transition-colors ${s?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${s?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(D,{className:`h-5 w-5 transition-colors ${s?"text-blue-400":"text-blue-600"}`})}),e.jsx("h3",{className:`text-lg font-semibold transition-colors ${s?"text-white":"text-gray-900"}`,children:"거래처 정보"})]})}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"업체명"}),e.jsx("button",{className:`text-sm font-medium cursor-pointer focus:outline-none focus:ring-1 rounded transition-all text-left ${s?"text-blue-400 hover:text-blue-300 focus:ring-blue-400":"text-blue-600 hover:text-blue-700 focus:ring-blue-500"}`,onClick:()=>r.vendor?.id&&n(`/vendors/${r.vendor.id}`),title:"거래처 상세보기","aria-label":`거래처 ${r.vendor.name} 상세보기`,tabIndex:0,onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),r.vendor?.id&&n(`/vendors/${r.vendor.id}`))},children:r.vendor.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"담당자"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(p,{className:`h-3 w-3 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.vendor.contact||"-"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"전화번호"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xe,{className:`h-3 w-3 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.vendor.phone||"-"})]})]})]}),r.vendor.email&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"이메일"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ge,{className:`h-3 w-3 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-xs transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.vendor.email})]})]}),r.vendor.address&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"주소"}),e.jsxs("div",{className:"flex items-start gap-1",children:[e.jsx(S,{className:`h-3 w-3 mt-0.5 flex-shrink-0 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-xs transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.vendor.address})]})]})]})})]}),r.project&&e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-6 border-b transition-colors ${s?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${s?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(D,{className:`h-5 w-5 transition-colors ${s?"text-blue-400":"text-blue-600"}`})}),e.jsx("h3",{className:`text-lg font-semibold transition-colors ${s?"text-white":"text-gray-900"}`,children:"현장 정보"})]})}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"현장명"}),e.jsx("button",{className:`text-sm font-medium cursor-pointer focus:outline-none focus:ring-1 rounded transition-all text-left ${s?"text-blue-400 hover:text-blue-300 focus:ring-blue-400":"text-blue-600 hover:text-blue-700 focus:ring-blue-500"}`,onClick:()=>n(`/projects/${r.project.id}`),title:"현장 상세보기","aria-label":`현장 ${r.project.projectName} 상세보기`,tabIndex:0,onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),n(`/projects/${r.project.id}`))},children:r.project.projectName}),e.jsxs("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:["(",r.project.projectCode,")"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"담당자"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(p,{className:`h-3 w-3 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.project.projectManager||"-"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"위치"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(S,{className:`h-3 w-3 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:r.project.location||"-"})]})]})]}),r.project.description&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block mb-1 transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"설명"}),e.jsx("div",{className:`text-xs p-2 rounded transition-colors ${s?"bg-gray-700 text-gray-200":"bg-gray-50 text-gray-700"}`,children:r.project.description})]})]})})]})]}),e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-6 border-b transition-colors ${s?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${s?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(j,{className:`h-5 w-5 transition-colors ${s?"text-blue-400":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold transition-colors ${s?"text-white":"text-gray-900"}`,children:"발주 품목"}),e.jsxs("span",{className:`text-sm transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:["총 ",r.items?.length||0,"개 품목"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"총 발주금액"}),e.jsx("span",{className:`text-sm font-semibold transition-colors ${s?"text-blue-400":"text-blue-600"}`,children:d(r.totalAmount)})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(V,{children:[e.jsx(X,{children:e.jsxs(C,{className:`border-b transition-colors ${s?"border-gray-600":"border-blue-100"}`,children:[e.jsx(i,{className:`text-xs py-2 px-2 font-medium transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"품목명"}),e.jsx(i,{className:`text-xs py-2 px-2 font-medium transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"대분류"}),e.jsx(i,{className:`text-xs py-2 px-2 font-medium transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"중분류"}),e.jsx(i,{className:`text-xs py-2 px-2 font-medium transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"소분류"}),e.jsx(i,{className:`text-xs py-2 px-2 font-medium transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"규격"}),e.jsx(i,{className:`text-xs text-center py-2 px-2 font-medium transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"수량"}),e.jsx(i,{className:`text-xs text-right py-2 px-2 font-medium transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"단가"}),e.jsx(i,{className:`text-xs text-right py-2 px-2 font-medium transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"금액"}),e.jsx(i,{className:`text-xs py-2 px-2 font-medium transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"비고"})]})}),e.jsx(Y,{children:r.items?.map((t,c)=>e.jsxs(C,{className:`border-b transition-colors ${s?"border-gray-600 hover:bg-gray-700/30":"border-blue-100 hover:bg-blue-50/30"}`,children:[e.jsx(o,{className:"py-2 px-2",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{className:`h-3 w-3 flex-shrink-0 transition-colors ${s?"text-gray-500":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("span",{className:`font-medium text-xs block transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:t.itemName}),t.specification&&e.jsx("span",{className:`text-xs transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:t.specification})]})]})}),e.jsx(o,{className:`py-2 px-2 text-xs transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:t.majorCategory&&t.majorCategory.trim()?t.majorCategory:"-"}),e.jsx(o,{className:`py-2 px-2 text-xs transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:t.middleCategory&&t.middleCategory.trim()?t.middleCategory:"-"}),e.jsx(o,{className:`py-2 px-2 text-xs transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:t.minorCategory&&t.minorCategory.trim()?t.minorCategory:"-"}),e.jsx(o,{className:`py-2 px-2 text-xs transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:t.specification||"-"}),e.jsx(o,{className:"text-center py-2 px-2",children:e.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium transition-colors ${s?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-800"}`,children:typeof t.quantity=="number"?t.quantity.toLocaleString():t.quantity||"-"})}),e.jsx(o,{className:`text-right py-2 px-2 font-medium text-xs transition-colors ${s?"text-blue-400":"text-blue-600"}`,children:d(t.unitPrice)}),e.jsx(o,{className:"text-right py-2 px-2",children:e.jsx("span",{className:`font-semibold text-xs transition-colors ${s?"text-blue-400":"text-blue-600"}`,children:d(t.totalAmount)})}),e.jsx(o,{className:`py-2 px-2 text-xs transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:t.notes||"-"})]},c))})]})}),e.jsx("div",{className:`mt-4 pt-4 border-t transition-colors ${s?"border-gray-700":"border-gray-200"}`,children:e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:`rounded p-3 min-w-[160px] transition-colors ${s?"bg-gray-700":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xs font-medium transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"총 발주금액"}),e.jsx("span",{className:`text-sm font-semibold transition-colors ${s?"text-blue-400":"text-blue-600"}`,children:d(r.totalAmount)})]})})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(te,{orderId:a})}),r.items&&r.items.length>0&&e.jsx("div",{children:e.jsx(ae,{orderItems:r.items,orderId:a})})]}),r.attachments&&r.attachments.length>0&&e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-6 border-b transition-colors ${s?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${s?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(me,{className:`h-5 w-5 transition-colors ${s?"text-blue-400":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold transition-colors ${s?"text-white":"text-gray-900"}`,children:"첨부파일"}),e.jsxs("span",{className:`text-sm transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:["총 ",r.attachments.length,"개 파일"]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.attachments.map(t=>e.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg transition-all ${s?"border-gray-600 hover:border-gray-500 hover:bg-gray-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e.jsx(b,{className:`h-4 w-4 transition-colors ${s?"text-gray-500":"text-gray-400"}`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:`text-xs font-medium truncate block transition-colors ${s?"text-gray-200":"text-gray-900"}`,title:t.filename,children:t.filename}),e.jsx("span",{className:`text-xs transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"첨부파일"})]})]}),e.jsxs(l,{variant:"outline",size:"sm",className:`ml-2 flex-shrink-0 h-7 px-2 text-xs transition-colors ${s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(he,{className:"h-3 w-3 mr-1"}),"다운로드"]})]},t.id))})})]}),e.jsx(Z,{open:T,onOpenChange:u,children:e.jsxs(ee,{className:`max-w-[1366px] max-h-[90vh] overflow-y-auto transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx(se,{children:e.jsxs(re,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:`h-4 w-4 transition-colors ${s?"text-gray-400":"text-gray-600"}`}),e.jsxs("div",{children:[e.jsx("span",{className:`text-sm font-semibold transition-colors ${s?"text-white":"text-gray-900"}`,children:"발주서 미리보기"}),e.jsx("span",{className:`text-xs block transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:r?.orderNumber})]})]}),e.jsx("div",{className:"flex space-x-1",children:e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>{const t=window.open("","_blank");t&&(t.document.write(`
                          <html>
                            <head>
                              <title>발주서 - ${r?.orderNumber}</title>
                              <style>
                                body { margin: 0; font-family: Arial, sans-serif; }
                                @media print {
                                  body { margin: 0; }
                                  .no-print { display: none !important; }
                                }
                              </style>
                            </head>
                            <body>
                              ${document.querySelector(".order-preview-content")?.innerHTML||""}
                            </body>
                          </html>
                        `),t.document.close(),t.print())},className:`h-8 px-2 text-xs transition-colors ${s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(ye,{className:"h-4 w-4 mr-1"}),"PDF 출력"]})})]})}),e.jsx("div",{className:"order-preview-content mt-2",children:r&&e.jsx(ie,{order:r})})]})})]})]})})}export{Ue as default};
